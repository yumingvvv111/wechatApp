{"version":3,"sources":["p6-play.js","./src/app/js-convertted/page-js/p6-play.js","./src/app/pages/p6-board/p6-play.html ./~/html-loader?-attrs"],"names":["webpackJsonp","module","exports","require","afterInitPage","paramFromURL","coverPage","data","jsonData","circleBoardModel","forEach","v","renderCircleBoard","selector","frontRange","backRange","value","renderTime","uploadTime","type","animateIt","circleElement","num","step","n","$element","css","requestAnimationFrame","find","renderWarningMessage","level","$","minA","maxA","meanA","originalNum","parseFloat","text","isNaN","addClass","stages","stageName","colorStage","colorName","i","j","length","_time","html","pageManager","common","utils","getInfoFromURL","param","JSON","parse","scope","equipmentName","initPage",15],"mappings":"AAAAA,cAAc,KAER,EACA,SAASC,EAAQC,EAASC,GCahC,QAAAC,KACA,GAAAC,EAAAC,UAAA,CACA,GAAAC,GAAAC,EACAC,EAAAF,EAAAE,gBACAA,GAAAC,QAAA,SAAAC,GACAC,EAAAD,EAAAE,SAAAF,EAAAG,WAAAH,EAAAI,UAAAJ,EAAAK,SAEAC,EAAAV,EAAAW,WAAA,6BAKA,QAAAN,GAAAC,EAAAC,EAAAC,EAAAC,EAAAG,GAiBA,QAAAC,GAAAC,EAAAC,GAIA,QAAAC,KACAC,GAAA,EACAA,EAAA,MACAA,EAAA,KAEAC,EAAAC,IAAA,sBAAAF,EAAA,QACAF,EAAAE,GACAG,sBAAAJ,GAVA,GAAAE,GAAAJ,EAAAO,KAAA,eACAJ,EAAA,CAaAG,uBAAAJ,GA+CA,QAAAM,GAAAV,EAAAW,IA9EA,GAAAT,GAAAU,EAAAlB,GAEAmB,EAAAlB,EAAA,GAEAmB,EAAAnB,EAAA,GAEAoB,EAAA,KAAAD,EAAAD,GAEAG,EAAAC,WAAApB,GACAM,GAAAa,GAAA,GAAAD,CA0BA,IAzBAb,EAAAO,KAAA,eAAAS,KAAAC,MAAAH,GAAA,KAAAA,GACA,KAAAb,EACAF,EAAAC,EAAAC,GAEAF,EAAAC,EAAA,KAqBAiB,MAAAH,GACAd,EAAAkB,SAAA,sBACS,CAET,kBAAA1B,EAAA,CAMA,OALA2B,IAAA,yBACAC,GAAA,qCACAC,GAAA,QACAC,EAAA,GAEAC,EAAA,EAAAC,EAAAD,EAAA,EAA0CA,EAAAJ,EAAAM,OAAA,EAAuBF,IAAAC,EAAAD,EAAA,EACjE,GAAAT,EAAAK,EAAAI,IAAAT,GAAAK,EAAAK,GAAA,CACAxB,EAAAO,KAAA,iBAAAS,KAAAI,EAAAG,IACAT,GAAAO,EAAA,IACAC,EAAA,gBACAd,EAAAV,EAAA,IACyBgB,EAAAO,EAAA,IAAAP,GAAAO,EAAA,IACzBC,EAAA,kBACAd,EAAAV,EAAA,KAEAwB,EAAA,eACAd,EAAAV,EAAA,GAEA,OAIA,WADAE,GAAAkB,SAAAI,GAGAR,GAAApB,EAAA,IACAM,EAAAkB,SAAA,iBACAlB,EAAAO,KAAA,iBAAAS,KAAA,QAAAlB,GAAA,SAAAA,EAAA,UACAU,EAAAV,EAAA,IACaJ,EAAA,GAAAoB,MAAApB,EAAA,IACbM,EAAAkB,SAAA,mBACAlB,EAAAO,KAAA,iBAAAS,KAAA,QAAAlB,GAAA,SAAAA,EAAA,WACAU,EAAAV,EAAA,KAEAE,EAAAkB,SAAA,gBACAlB,EAAAO,KAAA,iBAAAS,KAAA,QAAAlB,GAAA,SAAAA,EAAA,WACAU,EAAAV,EAAA,KAUA,QAAAF,GAAA8B,EAAAlC,GAYAkB,EAAAlB,GAAAwB,KAAAU,GAAA,GA9HA,GAAAC,GAAA7C,EAAA,IAEA8C,GADA9C,EAAA,GACAA,EAAA,IACA+C,EAAA/C,EAAA,GAGAE,EAAA6C,EAAAC,MAAAC,iBAAAC,MACA7C,EAAA8C,KAAAC,MAAAlD,EAAAE,MAEAiD,GACAC,cAAAjD,EAAAiD,cAGAR,GAAAS,SAAAV,EAAA,UAAAQ,EAAApD,ID8HMuD,GACA,SAAS1D,EAAQC,EAASC,GE5IhCF,EAAAC,QAAA","file":"p6-play.js","sourcesContent":["webpackJsonp([11],{\n\n/***/ 0:\n/***/ function(module, exports, require) {\n\n\tvar html = require(15);\n\tvar restAPI=require(2);\n\tvar pageManager=require(3);\n\tvar common=require(1);\n\t\n\t\n\t    var paramFromURL = common.utils.getInfoFromURL().param;\n\t    var jsonData = JSON.parse(paramFromURL.data);\n\t\n\t    var scope = {\n\t        equipmentName: jsonData.equipmentName\n\t    };\n\t\n\t    pageManager.initPage(html, 'p6-play', scope, afterInitPage);\n\t\n\t\n\t    function afterInitPage() {\n\t        if(paramFromURL.coverPage){\n\t            var data = jsonData;\n\t            var circleBoardModel = data.circleBoardModel;\n\t            circleBoardModel.forEach(function (v) {\n\t                renderCircleBoard(v.selector, v.frontRange, v.backRange, v.value);\n\t            });\n\t            renderTime(data.uploadTime, '.page-p6-play .link-info');\n\t        }\n\t    }\n\t\n\t\n\t    function renderCircleBoard(selector, frontRange, backRange, value, type) {\n\t        var circleElement = $(selector);\n\t        //最小值\n\t        var minA = frontRange[0];\n\t        //最大值\n\t        var maxA = frontRange[1];\n\t        //一个数字平均旋转度数\n\t        var meanA = 180 / (maxA - minA);\n\t        //具体数字\n\t        var originalNum = parseFloat(value);\n\t        var num = (originalNum || 0) * meanA;\n\t        circleElement.find('.big-number').text(isNaN(originalNum) ? '--' : originalNum);\n\t        if (num <= 180) {\n\t            animateIt(circleElement, num);\n\t        } else {\n\t            animateIt(circleElement, 180);\n\t        }\n\t        function animateIt(circleElement, num) {\n\t            var $element = circleElement.find('.out-cricle');\n\t            var n = 0;\n\t\n\t            function step() {\n\t                n += 2;\n\t                if (n > 180) {\n\t                    n = 180;\n\t                }\n\t                $element.css('transform', \"rotate(\" + n + \"deg)\");\n\t                if (n < num) {\n\t                    requestAnimationFrame(step);\n\t                }\n\t            }\n\t\n\t            requestAnimationFrame(step);\n\t        }\n\t\n\t        //判断背景环颜色\n\t        if (isNaN(originalNum)) {\n\t            circleElement.addClass('dial-box-white');\n\t        } else {\n\t            //hack pm2.5\n\t            if (selector === '.dial-box1') {\n\t                var stages = [0, 35, 75, 115, 150, 250, 1000];\n\t                var stageName = ['优', '良', '轻度污染', '中度污染', '重度污染', '严重污染'];\n\t                var colorStage = [75, 150];\n\t                var colorName = '';\n\t\n\t                for (var i = 0, j = i + 1; i < stages.length - 1; i++, j = i + 1) {\n\t                    if (originalNum > stages[i] && originalNum <= stages[j]) {\n\t                        circleElement.find('.small-number').text(stageName[i]);\n\t                        if (originalNum <= colorStage[0]) {\n\t                            colorName = 'dial-box-blue';\n\t                            renderWarningMessage(type, 0);\n\t                        } else if (originalNum > colorStage[0] && originalNum <= colorStage[1]) {\n\t                            colorName = 'dial-box-yellow';\n\t                            renderWarningMessage(type, 1);\n\t                        } else {\n\t                            colorName = 'dial-box-red';\n\t                            renderWarningMessage(type, 2);\n\t                        }\n\t                        break;\n\t                    }\n\t                }\n\t                circleElement.addClass(colorName);\n\t                return;\n\t            }\n\t            if (originalNum <= backRange[0]) {\n\t                circleElement.addClass('dial-box-blue');\n\t                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '安全' : '优');\n\t                renderWarningMessage(type, 0);\n\t            } else if (backRange[0] < originalNum && originalNum <= backRange[1]) {\n\t                circleElement.addClass('dial-box-yellow');\n\t                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '轻度' : '中等');\n\t                renderWarningMessage(type, 1);\n\t            } else {\n\t                circleElement.addClass('dial-box-red');\n\t                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '重度' : '严重');\n\t                renderWarningMessage(type, 2);\n\t            }\n\t\n\t            function renderWarningMessage(type, level) {\n\t\n\t            }\n\t        }\n\t    }\n\t\n\t\n\t    function renderTime(_time, selector) {\n\t        // var _time2 = (new Date()).getTime();\n\t        // _time = _time2 - _time;\n\t        // if (_time < 60 * 1000) {\n\t        //     _time = parseInt(_time / 1000) + '秒前'\n\t        // } else if (_time >= 60 * 1000 && _time < 60 * 60 * 1000) {\n\t        //     _time = parseInt(_time / (60 * 1000)) + '分钟前'\n\t        // } else if (_time >= 60 * 60 * 1000 && _time < 60 * 60 * 24 * 1000) {\n\t        //     _time = parseInt(_time / (60 * 60 * 1000)) + '小时前'\n\t        // } else {\n\t        //     _time = parseInt(_time / (60 * 60 * 24 * 1000)) + '天前'\n\t        // }\n\t        $(selector).text(_time || 0);\n\t    }\n\t\n\t\n\n\n/***/ },\n\n/***/ 15:\n/***/ function(module, exports, require) {\n\n\tmodule.exports = \" <div class=\\\"page p6-data black-bgcolor\\\" xmlns=http://www.w3.org/1999/html> <input type=hidden name=title value=空气猫P6plus型 /> <div class=\\\"top-title clearfix\\\"> <a href=javascript:; class=\\\"home fl\\\" id=equipmentName data-bind={text:$root.equipmentName,click:$root.onClickEquipmentName}></a> <span class=\\\"link-info fr\\\">3分钟前</span> </div> <div class=dial-listbox> <div class=\\\"dial-box dial-box2\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>0.05</span></div> <div class=texting-num>甲醛<span class=mlr5>|</span><span class=small-number>优</span></div> </div> </div> <div class=\\\"dial-box dial-box3\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>--</span></div> <div class=texting-num>TVOC<span class=mlr5>|</span><span class=small-number>--</span> </div> </div> </div> <div class=\\\"dial-box dial-box1\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>&mu;g/m³</div> <div class=texting-big-num><span class=big-number>189</span></div> <div class=texting-num>PM2.5<span class=mlr5>|</span><span class=small-number>严重</span> </div> </div> </div> <div class=\\\"dial-box dial-box4\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company></div> <div class=texting-big-num><span class=big-number>430</span></div> <div class=texting-num>污染指数</div> </div> </div> <div class=\\\"dial-box dial-box5 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>℃</div> <div class=texting-big-num><span class=big-number>27</span></div> <div class=texting-num>温度</div> </div> </div> <div class=\\\"dial-box dial-box6 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>%</div> <div class=texting-big-num><span class=big-number>56</span></div> <div class=texting-num>湿度</div> </div> </div> <div class=clearfix></div> </div> <div class=product-infor> <div class=product-img> <img src=app/images/p6-image.png> </div> <div class=product-hd> <h2>便携式空气质量动态监测仪<br>空气猫P6plus型</h2> <p>清华大学控股企业/甲醛、TVOC、PM2.5、<br>污染指数、温度、湿度</p> </div> <div class=product-bd> <span class=shop-car><img src=app/images/shop-car.png> </span><a href=\\\"https://detail.tmall.com/item.htm?spm=a230r.1.14.6.ebb2eb2Lem6Va&id=533985656878&cm_id=140105335569ed55e27b&abbucket=4\\\" target=_blank>马上购买</a> </div> </div> </div> \";\n\n/***/ }\n\n})","var html = require(\"html-loader?-attrs!../../pages/p6-board/p6-play.html\");\nvar restAPI=require(\"restAPI\");\nvar pageManager=require(\"pageManager\");\nvar common=require(\"common\");\n\n\n    var paramFromURL = common.utils.getInfoFromURL().param;\n    var jsonData = JSON.parse(paramFromURL.data);\n\n    var scope = {\n        equipmentName: jsonData.equipmentName\n    };\n\n    pageManager.initPage(html, 'p6-play', scope, afterInitPage);\n\n\n    function afterInitPage() {\n        if(paramFromURL.coverPage){\n            var data = jsonData;\n            var circleBoardModel = data.circleBoardModel;\n            circleBoardModel.forEach(function (v) {\n                renderCircleBoard(v.selector, v.frontRange, v.backRange, v.value);\n            });\n            renderTime(data.uploadTime, '.page-p6-play .link-info');\n        }\n    }\n\n\n    function renderCircleBoard(selector, frontRange, backRange, value, type) {\n        var circleElement = $(selector);\n        //最小值\n        var minA = frontRange[0];\n        //最大值\n        var maxA = frontRange[1];\n        //一个数字平均旋转度数\n        var meanA = 180 / (maxA - minA);\n        //具体数字\n        var originalNum = parseFloat(value);\n        var num = (originalNum || 0) * meanA;\n        circleElement.find('.big-number').text(isNaN(originalNum) ? '--' : originalNum);\n        if (num <= 180) {\n            animateIt(circleElement, num);\n        } else {\n            animateIt(circleElement, 180);\n        }\n        function animateIt(circleElement, num) {\n            var $element = circleElement.find('.out-cricle');\n            var n = 0;\n\n            function step() {\n                n += 2;\n                if (n > 180) {\n                    n = 180;\n                }\n                $element.css('transform', \"rotate(\" + n + \"deg)\");\n                if (n < num) {\n                    requestAnimationFrame(step);\n                }\n            }\n\n            requestAnimationFrame(step);\n        }\n\n        //判断背景环颜色\n        if (isNaN(originalNum)) {\n            circleElement.addClass('dial-box-white');\n        } else {\n            //hack pm2.5\n            if (selector === '.dial-box1') {\n                var stages = [0, 35, 75, 115, 150, 250, 1000];\n                var stageName = ['优', '良', '轻度污染', '中度污染', '重度污染', '严重污染'];\n                var colorStage = [75, 150];\n                var colorName = '';\n\n                for (var i = 0, j = i + 1; i < stages.length - 1; i++, j = i + 1) {\n                    if (originalNum > stages[i] && originalNum <= stages[j]) {\n                        circleElement.find('.small-number').text(stageName[i]);\n                        if (originalNum <= colorStage[0]) {\n                            colorName = 'dial-box-blue';\n                            renderWarningMessage(type, 0);\n                        } else if (originalNum > colorStage[0] && originalNum <= colorStage[1]) {\n                            colorName = 'dial-box-yellow';\n                            renderWarningMessage(type, 1);\n                        } else {\n                            colorName = 'dial-box-red';\n                            renderWarningMessage(type, 2);\n                        }\n                        break;\n                    }\n                }\n                circleElement.addClass(colorName);\n                return;\n            }\n            if (originalNum <= backRange[0]) {\n                circleElement.addClass('dial-box-blue');\n                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '安全' : '优');\n                renderWarningMessage(type, 0);\n            } else if (backRange[0] < originalNum && originalNum <= backRange[1]) {\n                circleElement.addClass('dial-box-yellow');\n                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '轻度' : '中等');\n                renderWarningMessage(type, 1);\n            } else {\n                circleElement.addClass('dial-box-red');\n                circleElement.find('.small-number').text((type === 'ch2' || type === 'tvoc')? '重度' : '严重');\n                renderWarningMessage(type, 2);\n            }\n\n            function renderWarningMessage(type, level) {\n\n            }\n        }\n    }\n\n\n    function renderTime(_time, selector) {\n        // var _time2 = (new Date()).getTime();\n        // _time = _time2 - _time;\n        // if (_time < 60 * 1000) {\n        //     _time = parseInt(_time / 1000) + '秒前'\n        // } else if (_time >= 60 * 1000 && _time < 60 * 60 * 1000) {\n        //     _time = parseInt(_time / (60 * 1000)) + '分钟前'\n        // } else if (_time >= 60 * 60 * 1000 && _time < 60 * 60 * 24 * 1000) {\n        //     _time = parseInt(_time / (60 * 60 * 1000)) + '小时前'\n        // } else {\n        //     _time = parseInt(_time / (60 * 60 * 24 * 1000)) + '天前'\n        // }\n        $(selector).text(_time || 0);\n    }\n\n\n","module.exports = \" <div class=\\\"page p6-data black-bgcolor\\\" xmlns=http://www.w3.org/1999/html> <input type=hidden name=title value=空气猫P6plus型 /> <div class=\\\"top-title clearfix\\\"> <a href=javascript:; class=\\\"home fl\\\" id=equipmentName data-bind={text:$root.equipmentName,click:$root.onClickEquipmentName}></a> <span class=\\\"link-info fr\\\">3分钟前</span> </div> <div class=dial-listbox> <div class=\\\"dial-box dial-box2\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>0.05</span></div> <div class=texting-num>甲醛<span class=mlr5>|</span><span class=small-number>优</span></div> </div> </div> <div class=\\\"dial-box dial-box3\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>--</span></div> <div class=texting-num>TVOC<span class=mlr5>|</span><span class=small-number>--</span> </div> </div> </div> <div class=\\\"dial-box dial-box1\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>&mu;g/m³</div> <div class=texting-big-num><span class=big-number>189</span></div> <div class=texting-num>PM2.5<span class=mlr5>|</span><span class=small-number>严重</span> </div> </div> </div> <div class=\\\"dial-box dial-box4\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company></div> <div class=texting-big-num><span class=big-number>430</span></div> <div class=texting-num>污染指数</div> </div> </div> <div class=\\\"dial-box dial-box5 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>℃</div> <div class=texting-big-num><span class=big-number>27</span></div> <div class=texting-num>温度</div> </div> </div> <div class=\\\"dial-box dial-box6 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>%</div> <div class=texting-big-num><span class=big-number>56</span></div> <div class=texting-num>湿度</div> </div> </div> <div class=clearfix></div> </div> <div class=product-infor> <div class=product-img> <img src=app/images/p6-image.png> </div> <div class=product-hd> <h2>便携式空气质量动态监测仪<br>空气猫P6plus型</h2> <p>清华大学控股企业/甲醛、TVOC、PM2.5、<br>污染指数、温度、湿度</p> </div> <div class=product-bd> <span class=shop-car><img src=app/images/shop-car.png> </span><a href=\\\"https://detail.tmall.com/item.htm?spm=a230r.1.14.6.ebb2eb2Lem6Va&id=533985656878&cm_id=140105335569ed55e27b&abbucket=4\\\" target=_blank>马上购买</a> </div> </div> </div> \";"],"sourceRoot":"webpack-module://"}