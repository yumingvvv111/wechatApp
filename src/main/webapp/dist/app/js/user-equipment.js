webpackJsonp([12],{0:function(a,i,e){function t(a){var i={};$(".user-equipment").removeClass("hidden"),l.ajaxManager({url:n.equipment.equipmentList.url,data:i,type:"post",success:function(a){0!=a.code?l.showTooltip(a.message):c.equipmentList=a.data.dataList}})}var s=e(16),n=e(2),l=e(3);n.equipment={unbind:{url:"equimentRest/restEquiment/equiment/unbind",param:["pkId","bindType","euppkId"]},equipmentList:{url:"equimentRest/restEquiment/equiment/list",param:["wxId"]}};var c={equipmentList:[{isPrimary:0,roomName:"无数据",pk_id:11,mac:"--"}],onClickUnbind:function(a,i){return $("#iosDialog1").fadeIn(200).attr("data-pkId",i.eupId).attr("data-bindType",i.isPrimary).attr("data-euppkId",i.euppkId),a.preventDefault(),a.stopPropagation(),!1},onClickExecuteUnbind:function(a){var i=$(a.target);l.ajaxManager({url:n.equipment.unbind.url,data:{pkId:i.closest("#iosDialog1").attr("data-pkId"),bindType:i.closest("#iosDialog1").attr("data-bindType"),euppkId:i.closest("#iosDialog1").attr("data-euppkId")},type:"post",success:function(a){0!=a.code?(console.warn(a),l.showTooltip(a.message)):(l.showTooltip("解绑成功","success"),setTimeout(function(){l.reloadPage()},1e3))}})},onClickCancel:function(){$(this).closest(".js_dialog").fadeOut(200)},onClickAdd:function(){l.go("binding-description")},gotoChartPage:function(a,i){l.go("p6-data?erId="+i.erId+"&eupId="+i.eupId+"&mac="+i.mac+"&isPrimary="+i.isPrimary)}};l.initPage(s,"user-equipment",c,t)},16:function(a,i,e){a.exports=' <div class="page user-equipment hidden" data-bind=$root> <input type=hidden name=title value=已有设备列表 /> <div class=weui-cells data-bind=foreach:(($root.equipmentList))> <div class=weui-cell data-bind=click:$root.gotoChartPage> <div class="weui-cell_hd cell_hd-pic"> <img src=app/images/product02.jpg> <span class=bottom-bt data-bind=isPrimary data-if="isPrimary==0">主</span> </div> <div class=weui-cell_bd> <p class=product-name data-bind=text:product_name>空气猫PM2.5检测仪</p> <p class=product-position data-bind=text:roomName>卧室</p> <p class=product-mac data-bind=text:mac>ab:ab:ab:ab:ab:ab</p> </div> <div class=weui-cell_ft> <a href=javascript:; class="cell_ft-pic equipment-remove" data-bind=click:$root.onClickUnbind> <img src=app/images/remove01.png> </a> </div> </div> </div> <div class=add-equipment-btn> <a href=javascript:; class="weui-btn weui-btn_primary" data-bind=click:onClickAdd>+添加设备</a> </div> <div id=dialogs> <div class=js_dialog id=iosDialog1 style=display:none> <div class=weui-mask></div> <div class=weui-dialog> <div class=weui-dialog__hd><strong class=weui-dialog__title>确定解绑吗？</strong></div> <div class=weui-dialog__ft> <a href=javascript:; class="weui-dialog__btn weui-dialog__btn_primary" data-bind=click:$root.onClickExecuteUnbind>确定</a> <a href=javascript:; class="weui-dialog__btn weui-dialog__btn_default" data-bind=click:$root.onClickCancel>取消</a> </div> </div> </div> </div> </div> '}});
//# sourceMappingURL=user-equipment.js.map