webpackJsonp([10],{0:function(a,i,e){function t(a){var i=JSON.stringify(a),e=location.href.split("#")[0]+"#p6-play?coverPage=true&page=p6-play&share=true&data="+i;return e}function s(a,i,e){var t=echarts.init($(a)[0]),s={title:{text:i.text+"-48小时记录",textStyle:{color:"#ffffff",fontSize:16},x:"center",bottom:0},color:["#ffffff"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"1%",right:"2%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisTick:{alignWithLabel:!1},axisLine:{lineStyle:{color:["#ffffff"]}},axisLable:{show:!1}}],yAxis:[{type:"value",name:"",min:e[0],max:e[1],position:"left",axisLine:{lineStyle:{color:["#ffffff"]}}}],series:[{name:"pm2.5",type:"bar",barWidth:"80%",data:i.data}]};t.setOption(s)}function l(a,i,e,t,s){function l(a,i){function e(){s+=2,s>180&&(s=180),t.css("transform","rotate("+s+"deg)"),i>s&&requestAnimationFrame(e)}var t=a.find(".out-cricle"),s=0;requestAnimationFrame(e)}function n(a,i){var e={ch2:["甲醛国家标准为0.1mg/m³，您所处的环境安全","您所处的环境甲醛超标，请及时采取净化措施或通风换气","您所处的环境甲醛超标严重，请立刻通风换气"],tvoc:["化学污染物国家标准为0.6mg/m³，您所处的环境安全","您所处的环境化学污染物超标，请及时采取净化措施或通风换气","您所处的环境化学污染物超标严重，请立刻通风换气"],pm25:["PM2.5国家标准为75μg/m³，您所处的环境安全","您所处的环境PM2.5超标，请及时采取净化措施","您所处的环境PM2.5超标严重，请立刻采取净化措施"]},t=["good-message","remind-message","Warning-message"][i],s=e[a];if(s){s=s[i];var l='<p class="'+t+'">'+s+"</p>";$(".page-p6-data .prompt-message").append(l)}}var c=$(a),r=i[0],o=i[1],d=180/(o-r),p=parseFloat(t),v=(p||0)*d;if(c.find(".big-number").text(null===p?"--":p),180>=v?l(c,v):l(c,180),isNaN(p))c.addClass("dial-box-white");else{if(".dial-box1"===a){for(var f=[0,35,75,115,150,250,1e3],u=["优","良","轻度污染","中度污染","重度污染","严重污染"],b=[75,150],m="",g=0,x=g+1;g<f.length-1;g++,x=g+1)if(p>f[g]&&p<=f[x]){c.find(".small-number").text(u[g]),p<=b[0]?(m="dial-box-blue",n(s,0)):p>b[0]&&p<=b[1]?(m="dial-box-yellow",n(s,1)):(m="dial-box-red",n(s,2));break}return void c.addClass(m)}p<=e[0]?(c.addClass("dial-box-blue"),c.find(".small-number").text("优"),n(s,0)):e[0]<p&&p<=e[1]?(c.addClass("dial-box-yellow"),c.find(".small-number").text("中等"),n(s,1)):(c.addClass("dial-box-red"),c.find(".small-number").text("严重"),n(s,2))}}function n(){function a(){o.requestBackend({url:r.equipmentData.getEquimentData.url,param:{erId:p.erId||0,eupId:p.eupId||0,mac:p.mac||0},success:function(a){function i(a,i){var e=(new Date).getTime();a=e-a,a=6e4>a?parseInt(a/1e3)+"秒前":a>=6e4&&36e5>a?parseInt(a/6e4)+"分钟前":a>=36e5&&864e5>a?parseInt(a/36e5)+"小时前":parseInt(a/864e5)+"天前",$(i).text(a)}var e=a.equimentData;if(e&&"[object Object]"!==Object.prototype.toString.call(e))return void o.showTooltip("数据有误");var s=[{selector:".dial-box1",frontRange:[0,999],backRange:[76,150],value:e.pm25,type:"pm25"},{selector:".dial-box2",frontRange:[0,3],backRange:[.1,.19],value:e.ch2,type:"ch2"},{selector:".dial-box3",frontRange:[0,10],backRange:[.6,2],value:e.tvoc,type:"tvoc"},{selector:".dial-box4",frontRange:[0,500],backRange:[101,200],value:e.pollutionLevel,type:"pollutionLevel"},{selector:".dial-box5",frontRange:[-20,50],backRange:[1/0,1/0],value:e.temperature,type:"temperature"},{selector:".dial-box6",frontRange:[0,100],backRange:[1/0,1/0],value:e.humity,type:"humity"}];v.circleBoardModel=s,s.forEach(function(a){l(a.selector,a.frontRange,a.backRange,a.value,a.type)}),0!=p.isPrimary&&$(".page-p6-data #equipmentName").hide(),$(".page-p6-data #equipmentName").text(""===e.position.trim()?"未命名":e.position),v.uploadTime=e.uploadTime,i(e.uploadTime,".page-p6-data .link-info"),window.shareOption.link=t(v)}})}function i(){o.requestBackend({url:r.equipmentData.getEquimentDetailData.url,param:{erId:p.erId,mac:p.mac,eupId:p.eupId},success:function(a){function i(a){var i={};for(var e in a){var t=a[e];i[e]=[];for(var s=0,l=t.length;l>s;s++)i[e].push(t[s].value)}return i}var e=a.equimentDetailData;if(e&&"[object Object]"!==Object.prototype.toString.call(e))return void o.showTooltip("数据有误");e=i(e);var t=[{selector:"#first-echart-box",data:e.ch2,text:"甲醛",range:[0,3]},{selector:"#second-echart-box",data:e.pollutionLevel,text:"污染指数",range:[0,520]},{selector:"#three-echart-box",data:e.tvoc,text:"化学污染物",range:[0,15]},{selector:"#four-echart-box",data:e.humity,text:"湿度",range:[0,110]},{selector:"#five-echart-box",data:e.pm25,text:"PM2.5",range:[0,1030]},{selector:"#six-echart-box",data:e.temperature,text:"温度",range:[-20,60]}];t.forEach(function(a){s(a.selector,a,a.range)})}})}a(),setInterval(a,3e5),i(),setInterval(i,36e5)}var c=e(14),r=e(2),o=e(3),d=e(1),p=d.utils.getInfoFromURL().param,v={};r.equipmentData={getEquimentData:{url:"equimentRest/restEquiment/equiment/getEquimentData",param:["erId","eupId","mac"]},getEquimentDetailData:{url:"equimentRest/restEquiment/equiment/getEquimentDetailData",param:["erId","mac","eupId"]},changeEquipmentName:{url:"equimentRest/restEquiment/equiment/position",param:["eupId","erId","name"]}};var f={equipmentName:"",onClickEquipmentName:function(){$("#changeNameWrapper").fadeIn(200)},onClickShare:function(){$("#share").fadeIn(200)},onClickShareWrapper:function(){$("#share").fadeOut(200)},onClickPrimary:function(){var a=$("#changeNameWrapper input").val();o.requestBackend({url:r.equipmentData.changeEquipmentName.url,param:{name:a,erId:p.erId,eupId:p.eupId},success:function(i){$("#equipmentName").text(""===a.trim()?"未命名":a),o.showTooltip("修改成功","success")}}),$(".js_dialog").fadeOut(200)},onClickCancel:function(){$(".js_dialog").fadeOut(200)}};o.initPage(c,"p6-data",f,n)},14:function(a,i,e){a.exports=' <div class="page p6-data black-bgcolor"> <input type=hidden name=title value=空气猫P6型雾霾检测仪 /> <div class="top-title clearfix"> <a href=javascript:; class="home fl" id=equipmentName data-bind={text:$root.equipmentName,click:$root.onClickEquipmentName}>未定义</a> <span class="link-info fr">3分钟前</span> </div> <div class=dial-listbox> <div class="dial-box dial-box2"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>0.05</span></div> <div class=texting-num>甲醛<span class=mlr5>|</span><span class=small-number>优</span></div> </div> </div> <div class="dial-box dial-box3"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>--</span></div> <div class=texting-num>化学污染物<span class=mlr5>|</span><span class=small-number>--</span> </div> </div> </div> <div class="dial-box dial-box1"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>&mu;g/m³</div> <div class=texting-big-num><span class=big-number>189</span></div> <div class=texting-num>PM2.5<span class=mlr5>|</span><span class=small-number>严重</span> </div> </div> </div> <div class="dial-box dial-box4"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company></div> <div class=texting-big-num><span class=big-number>430</span></div> <div class=texting-num>污染指数</div> </div> </div> <div class="dial-box dial-box5 dial-box-blue"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>℃</div> <div class=texting-big-num><span class=big-number>27</span></div> <div class=texting-num>温度</div> </div> </div> <div class="dial-box dial-box6 dial-box-blue"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>%</div> <div class=texting-big-num><span class=big-number>56</span></div> <div class=texting-num>湿度</div> </div> </div> <div class=clearfix></div> </div> <div class=prompt-message> <p class=good-message>甲醛国家标准为0.1mg/m³，您所处环境安全</p> <p class=remind-message>您所处的环境化学污染物超标，请及时采取净化措施或通风换气</p> <p class=Warning-message>您所处的环境PM2.5超标，请及时采取净化措施</p> <p class=Warning-message>您所处的环境二氧化碳超标严重，请立刻通风换气</p> </div> <div class=echartsbox> <div id=first-echart-box class=first-echart-box></div> <div id=three-echart-box class=three-echart-box></div> <div id=five-echart-box class=five-echart-box></div> <div id=second-echart-box class=second-echart-box></div> <div id=six-echart-box class=six-echart-box></div> <div id=four-echart-box class=four-echart-box></div> </div> <div class=foot-tabbar> <div class="weui-tabbar weui-tabbar-link"> <a href=javascript:; class=weui-tabbar__item> <img src=app/images/Shutdown.png alt="" class=weui-tabbar__icon> <p class=weui-tabbar__label>关机</p> </a> <a href=javascript:; class=weui-tabbar__item> <img src=app/images/Always.png alt="" class=weui-tabbar__icon> <p class=weui-tabbar__label>设备常亮</p> </a> <a href=javascript:; class=weui-tabbar__item data-bind=click:$root.onClickShare> <img src=app/images/share.png alt="" class=weui-tabbar__icon> <p class=weui-tabbar__label>分享</p> </a> </div> </div> <div class=none-div></div> <div id=dialogs> <div class=js_dialog id=changeNameWrapper style=display:none> <div class=weui-mask></div> <div class=weui-dialog> <div class=weui-dialog__hd><strong class=weui-dialog__title>请给设备命名</strong></div> <div class=weui-dialog__bd> <input class="weui-input input-text" type=text placeholder=请输入设备名称> </div> <div class=weui-dialog__ft> <a href=javascript:; class="weui-dialog__btn weui-dialog__btn_primary" data-bind=click:$root.onClickPrimary>确定</a> <a href=javascript:; class="weui-dialog__btn weui-dialog__btn_default" data-bind=click:$root.onClickCancel>取消</a> </div> </div> </div> </div> <div id=shareWrapper data-bind=click:$root.onClickShareWrapper> <div class=js_dialog id=share style=display:none> <div class=weui-mask></div> <div class=share-layer> <img class=share-pic src=app/images/sharePic.png> </div> </div> </div> </div> '}});
//# sourceMappingURL=p6-data.js.map