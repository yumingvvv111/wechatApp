{"version":3,"sources":["main.js","./src/app/js-convertted/main.js"],"names":["webpackJsonp","module","exports","require","getWxId","dfd","$","Deferred","WXID","resolve","wxId","from","CODE","pageManager","ajaxManager","url","restAPI","accessPermission","data","code","type","success","res","_wxId","WXId","window","reject","fail","ex","promise","getTicket","location","href","split","dataType","common","defaultPage","utils","paramFromInfo","getInfoFromURL","param","shareURL","shareOption","title","document","desc","link","imgUrl","path","then","replace","page","hash","_go","on","onHashChange","showTooltip","wx","config","beta","debug","appId","appid","timestamp","nonceStr","signature","jsApiList","ready","invoke","color","onMenuShareTimeline","onMenuShareQQ","onMenuShareAppMessage","console","warn"],"mappings":"AAAAA,cAAc,KAER,SAASC,EAAQC,EAASC,GC6BhC,QAAAC,KACA,GAAAC,GAAA,GAAAC,GAAAC,QA0BA,OAzBAC,MACAH,EAAAI,SAAyBC,KAAAF,KAAAG,KAAA,QAChBC,KACTC,YAAAC,aACAC,IAAAC,EAAAC,iBAAAb,QAAAW,IACAG,MACAC,KAAAP,MAEAQ,KAAA,MACAC,QAAA,SAAAC,GACA,OAAAA,EAAAH,KAAA,CACA,GAAAI,GAAAD,EAAAJ,KAAAM,IACAC,QAAAjB,KAAAe,EACAlB,EAAAI,SAAqCC,KAAAa,EAAAZ,KAAA,aAErCN,GAAAqB,OAAAJ,EAAAJ,OAGAS,KAAA,SAAAC,GACAvB,EAAAqB,OAAAE,MAIAvB,EAAAqB,OAAAlB,MAEAH,EAAAwB,UAKA,QAAAC,KACA,GAAAzB,GAAA,GAAAC,GAAAC,QAkBA,OAjBAM,aAAAC,aACAC,IAAAC,EAAAC,iBAAAa,UAAAf,IACAK,KAAA,OACAF,MACAH,IAAAgB,SAAAC,KAAAC,MAAA,SAEAC,SAAA,OACAb,QAAA,SAAAC,GACA,IAAAA,EAAAH,MACAd,EAAAI,QAAAa,EAAAJ,OAGAS,KAAA,SAAAC,GACAvB,EAAAqB,OAAAE,MAIAvB,EAAAwB,UAjFA,GAAAM,GAAAhC,EAAA,GACAa,EAAAb,EAAA,EACAsB,QAAAZ,YAAAV,EAAA,EACA,IAAAiC,GAAA,WACAC,EAAAF,EAAAE,MACAC,EAAAD,EAAAE,gBACAvB,GAAAC,kBACAb,SACAW,IAAA,8CACAyB,OAAA,SAEAV,WAEAf,IAAA,+CAMAU,OAAAb,KAAA0B,EAAAE,MAAArB,KACAM,OAAAjB,KAAA8B,EAAAE,MAAA9B,KACAe,OAAAgB,SAAAV,SAAAC,KACAP,OAAAiB,aACAC,MAAAC,SAAAD,MACAE,KAAA,cACAC,KAAAf,SAAAC,KACAe,OAAAT,EAAAU,KAAA,8CA2DA5C,IAAA6C,KAAA,SAAA/B,GACA,GAAAA,GAAA,SAAAA,EAAAP,KAEA,YADAoB,SAAAC,KAAAD,SAAAC,KAAAkB,QAAA,8BAAAzB,OAAAjB,MAGA,IAAA2C,GAAAb,EAAAc,MAAAhB,CACAvB,aAAAwC,IAAAF,GACA7C,EAAAmB,QAAA6B,GAAA,aAAAzC,YAAA0C,eACK,WACL1C,YAAA2C,YAAA,4CAIA1B,IAAAmB,KAAA,SAAA3B,GACAmC,GAAAC,QACAC,MAAA,EACAC,OAAA,EACAC,MAAAvC,EAAAwC,MACAC,UAAAzC,EAAAyC,UACAC,SAAA1C,EAAA0C,SACAC,UAAA3C,EAAA2C,UACAC,WACA,sBACA,wBACA,gBACA,mBACA,mBAUA,cACA,eACA,cACA,gBAEA,iBACA,eACA,cAOA,iBAWAT,GAAAU,MAAA,WACAV,GAAAW,OAAA,yBACAC,MAAA,UAGAZ,GAAAa,oBAAA7C,OAAAiB,aACAe,GAAAc,cAAA9C,OAAAiB,aACAe,GAAAe,sBAAA/C,OAAAiB,gBAGK,WACL+B,QAAAC,KAAA","file":"main.js","sourcesContent":["webpackJsonp([13],[\n/* 0 */\n/***/ function(module, exports, require) {\n\n\t\n\t    var common = require(1);\n\t    var restAPI = require(2);\n\t    window.pageManager = require(3);\n\t    var defaultPage = 'air-good';\n\t    var utils = common.utils;\n\t    var paramFromInfo = utils.getInfoFromURL();\n\t    restAPI.accessPermission = {\n\t        getWxId: {\n\t            url: 'equimentRest/restEquiment/pageToken/getCode',\n\t            param: ['code']\n\t        },\n\t        getTicket: {\n\t            // url: 'http://wwwv.applinzi.com/movieEnglishService/getSignature.php'\n\t            url: 'equimentRest/restEquiment/weixin/getTicket'\n\t        }\n\t    };\n\t\n\t\n\t    //把code和微信id暴露为全局常量\n\t    window.CODE = paramFromInfo.param.code;\n\t    window.WXID = paramFromInfo.param.wxId;\n\t    window.shareURL = location.href;\n\t    window.shareOption = {\n\t        title: document.title,\n\t        desc: '空气猫检测系列管理平台',\n\t        link: location.href,\n\t        imgUrl: paramFromInfo.path + 'equimentRest/dist/app/images/product02.jpg'\n\t    };//分享参数\n\t\n\t\n\t    function getWxId() {\n\t        var dfd = new $.Deferred();\n\t        if (WXID) {\n\t            dfd.resolve({wxId: WXID, from: 'url'});\n\t        } else if (CODE) {\n\t            pageManager.ajaxManager({\n\t                url: restAPI.accessPermission.getWxId.url,\n\t                data: {\n\t                    code: CODE\n\t                },\n\t                type: 'get',\n\t                success: function (res) {\n\t                    if (res.code === 0) {\n\t                        var _wxId = res.data.WXId;\n\t                        window.WXID = _wxId;\n\t                        dfd.resolve({wxId: _wxId, from: 'code'});\n\t                    } else {\n\t                        dfd.reject(res.data);\n\t                    }\n\t                },\n\t                fail: function (ex) {\n\t                    dfd.reject(ex);\n\t                }\n\t            });\n\t        } else {\n\t            dfd.reject(WXID);\n\t        }\n\t        return dfd.promise();\n\t    }\n\t\n\t\n\t    //获取jsSDK的 ticket\n\t    function getTicket() {\n\t        var dfd = new $.Deferred();\n\t        pageManager.ajaxManager({\n\t            url: restAPI.accessPermission.getTicket.url,\n\t            type: 'post',\n\t            data: {\n\t                url: location.href.split('#')[0]//encodeURIComponent(location.href.split('#')[0])\n\t            },\n\t            dataType: 'json',\n\t            success: function (res) {\n\t                if(res.code === 0){\n\t                    dfd.resolve(res.data);\n\t                }\n\t            },\n\t            fail: function (ex) {\n\t                dfd.reject(ex);\n\t            }\n\t        });\n\t\n\t        return dfd.promise();\n\t    }\n\t\n\t\n\t    getWxId().then(function (data) {\n\t        if (data && data.from === 'code') {\n\t            location.href = location.href.replace(/code=(.*?)(?=&|$|#)/, 'wxId=' + window.WXID);\n\t            return;\n\t        }\n\t        var page = paramFromInfo.hash || defaultPage;\n\t        pageManager._go(page);\n\t        $(window).on('hashchange', pageManager.onHashChange);\n\t    }, function () {\n\t        pageManager.showTooltip('\"微信绑定超时数据异常！请返回主页从新登录！错误代码：1\", \"error\"');\n\t        // pageManager._go(defaultPage);\n\t    });\n\t\n\t    getTicket().then(function (res) {\n\t        wx.config({\n\t            beta: true,\n\t            debug: false,\n\t            appId: res.appid,\n\t            timestamp: res.timestamp,\n\t            nonceStr: res.nonceStr,\n\t            signature: res.signature,\n\t            jsApiList: [\n\t                'onMenuShareTimeline',\n\t                'onMenuShareAppMessage',\n\t                'onMenuShareQQ',\n\t                'onMenuShareWeibo',\n\t                'onMenuShareQZone',\n\t                // 'startRecord',\n\t                // 'stopRecord',\n\t                // 'onVoiceRecordEnd',\n\t                // 'playVoice',\n\t                // 'pauseVoice',\n\t                // 'stopVoice',\n\t                // 'onVoicePlayEnd',\n\t                // 'uploadVoice',\n\t                // 'downloadVoice',\n\t                'chooseImage',\n\t                'previewImage',\n\t                'uploadImage',\n\t                'downloadImage',\n\t                // 'translateVoice',\n\t                'getNetworkType',\n\t                'openLocation',\n\t                'getLocation',\n\t                // 'hideOptionMenu',\n\t                // 'showOptionMenu',\n\t                // 'hideMenuItems',\n\t                // 'showMenuItems',\n\t                // 'hideAllNonBaseMenuItem',\n\t                // 'showAllNonBaseMenuItem',\n\t                'closeWindow',\n\t                // 'scanQRCode',\n\t                // 'chooseWXPay',\n\t                // 'openProductSpecificView',\n\t                // 'addCard',\n\t                // 'chooseCard',\n\t                // 'openCard'\n\t            ]\n\t        });\n\t\n\t\n\t        wx.ready(function () {\n\t            wx.invoke('setNavigationBarColor', {\n\t                color: 'green'\n\t            });\n\t\n\t            wx.onMenuShareTimeline(window.shareOption);\n\t            wx.onMenuShareQQ(window.shareOption);\n\t            wx.onMenuShareAppMessage(window.shareOption);\n\t\n\t        });\n\t    }, function () {\n\t        console.warn('获取js ticket失败');\n\t    });\n\t\n\t\n\n\n/***/ }\n])","\n    var common = require('common');\n    var restAPI = require('restAPI');\n    window.pageManager = require('pageManager');\n    var defaultPage = 'air-good';\n    var utils = common.utils;\n    var paramFromInfo = utils.getInfoFromURL();\n    restAPI.accessPermission = {\n        getWxId: {\n            url: 'equimentRest/restEquiment/pageToken/getCode',\n            param: ['code']\n        },\n        getTicket: {\n            // url: 'http://wwwv.applinzi.com/movieEnglishService/getSignature.php'\n            url: 'equimentRest/restEquiment/weixin/getTicket'\n        }\n    };\n\n\n    //把code和微信id暴露为全局常量\n    window.CODE = paramFromInfo.param.code;\n    window.WXID = paramFromInfo.param.wxId;\n    window.shareURL = location.href;\n    window.shareOption = {\n        title: document.title,\n        desc: '空气猫检测系列管理平台',\n        link: location.href,\n        imgUrl: paramFromInfo.path + 'equimentRest/dist/app/images/product02.jpg'\n    };//分享参数\n\n\n    function getWxId() {\n        var dfd = new $.Deferred();\n        if (WXID) {\n            dfd.resolve({wxId: WXID, from: 'url'});\n        } else if (CODE) {\n            pageManager.ajaxManager({\n                url: restAPI.accessPermission.getWxId.url,\n                data: {\n                    code: CODE\n                },\n                type: 'get',\n                success: function (res) {\n                    if (res.code === 0) {\n                        var _wxId = res.data.WXId;\n                        window.WXID = _wxId;\n                        dfd.resolve({wxId: _wxId, from: 'code'});\n                    } else {\n                        dfd.reject(res.data);\n                    }\n                },\n                fail: function (ex) {\n                    dfd.reject(ex);\n                }\n            });\n        } else {\n            dfd.reject(WXID);\n        }\n        return dfd.promise();\n    }\n\n\n    //获取jsSDK的 ticket\n    function getTicket() {\n        var dfd = new $.Deferred();\n        pageManager.ajaxManager({\n            url: restAPI.accessPermission.getTicket.url,\n            type: 'post',\n            data: {\n                url: location.href.split('#')[0]//encodeURIComponent(location.href.split('#')[0])\n            },\n            dataType: 'json',\n            success: function (res) {\n                if(res.code === 0){\n                    dfd.resolve(res.data);\n                }\n            },\n            fail: function (ex) {\n                dfd.reject(ex);\n            }\n        });\n\n        return dfd.promise();\n    }\n\n\n    getWxId().then(function (data) {\n        if (data && data.from === 'code') {\n            location.href = location.href.replace(/code=(.*?)(?=&|$|#)/, 'wxId=' + window.WXID);\n            return;\n        }\n        var page = paramFromInfo.hash || defaultPage;\n        pageManager._go(page);\n        $(window).on('hashchange', pageManager.onHashChange);\n    }, function () {\n        pageManager.showTooltip('\"微信绑定超时数据异常！请返回主页从新登录！错误代码：1\", \"error\"');\n        // pageManager._go(defaultPage);\n    });\n\n    getTicket().then(function (res) {\n        wx.config({\n            beta: true,\n            debug: false,\n            appId: res.appid,\n            timestamp: res.timestamp,\n            nonceStr: res.nonceStr,\n            signature: res.signature,\n            jsApiList: [\n                'onMenuShareTimeline',\n                'onMenuShareAppMessage',\n                'onMenuShareQQ',\n                'onMenuShareWeibo',\n                'onMenuShareQZone',\n                // 'startRecord',\n                // 'stopRecord',\n                // 'onVoiceRecordEnd',\n                // 'playVoice',\n                // 'pauseVoice',\n                // 'stopVoice',\n                // 'onVoicePlayEnd',\n                // 'uploadVoice',\n                // 'downloadVoice',\n                'chooseImage',\n                'previewImage',\n                'uploadImage',\n                'downloadImage',\n                // 'translateVoice',\n                'getNetworkType',\n                'openLocation',\n                'getLocation',\n                // 'hideOptionMenu',\n                // 'showOptionMenu',\n                // 'hideMenuItems',\n                // 'showMenuItems',\n                // 'hideAllNonBaseMenuItem',\n                // 'showAllNonBaseMenuItem',\n                'closeWindow',\n                // 'scanQRCode',\n                // 'chooseWXPay',\n                // 'openProductSpecificView',\n                // 'addCard',\n                // 'chooseCard',\n                // 'openCard'\n            ]\n        });\n\n\n        wx.ready(function () {\n            wx.invoke('setNavigationBarColor', {\n                color: 'green'\n            });\n\n            wx.onMenuShareTimeline(window.shareOption);\n            wx.onMenuShareQQ(window.shareOption);\n            wx.onMenuShareAppMessage(window.shareOption);\n\n        });\n    }, function () {\n        console.warn('获取js ticket失败');\n    });\n\n\n"],"sourceRoot":"webpack-module://"}