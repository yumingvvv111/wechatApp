{"version":3,"sources":["p6-data.js","./src/app/js-convertted/page-js/p6-data.js","./src/app/pages/p6-board/p6-data.html ./~/html-loader?-attrs"],"names":["webpackJsonp","module","exports","require","getShareURL","chartJsonData","jsonData","JSON","stringify","shareURL","location","href","split","renderChart","chartSelector","data","range","myfirstChart","echarts","init","$","option","title","text","textStyle","color","fontSize","x","bottom","grid","left","right","containLabel","xAxis","type","axisTick","alignWithLabel","axisLine","lineStyle","axisLable","show","yAxis","name","position","axisLabel","series","barWidth","y","setOption","renderCircleBoard","selector","frontRange","backRange","value","animateIt","circleElement","num","$element","find","attr","style","setTimeout","getText","index","levelMap","renderWarningMessage","level","textMap","ch2","standard","solution","justDoIt","tvoc","pm25","textMapTemplates","arr","forEach","v2","resultText","replace","m0","m1","push","className","htmlStr","html","minA","maxA","originalNum","parseFloat","isNaN","addClass","stages","stageName","colorStage","colorName","i","j","length","afterInitPage","reDrawCircleBoard","pageManager","requestBackend","url","restAPI","equipmentData","getEquimentData","param","erId","paramFromURL","eupId","mac","success","renderTime","_time","d","equimentData","Object","prototype","toString","call","showTooltip","circleBoardModel","pollutionLevel","Infinity","temperature","humity","v","isPrimary","hide","equipmentName","trim","uploadTime","ex","window","shareOption","link","reDrawChart","getEquimentDetailData","convertData","obj","items","itemLength","timeRegex","timeAmount","dataArray","Array","sort","a","b","reg","v1","time","match","r1","parseInt","r2","r3","Math","abs","_value","n","rightSideItem","pop","itemMatch","maxTime","maxDay","maxMonth","len","_t","equimentDetailData","chartModel","setRefreshPage","setInterval","getTicket","dfd","Deferred","ajaxManager","dataType","res","code","resolve","fail","reject","promise","common","utils","getInfoFromURL","changeEquipmentName","clientOFF","sheScreen","sheScreenOFF","scope","onClickEquipmentName","fadeIn","onClickShare","onClickShareWrapper","fadeOut","onClickShutdown","this","before","alert","message","remove","onClickSheScreenOFF","onClickSheScreen","onClickPrimary","val","onClickCancel","initPage","then","wx","config","beta","debug","appId","appid","timestamp","nonceStr","signature","jsApiList","ready","invoke","onMenuShareTimeline","onMenuShareQQ","onMenuShareAppMessage","console","warn",14],"mappings":"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","file":"p6-data.js","sourcesContent":["webpackJsonp([10],{\n\n/***/ 0:\n/***/ function(module, exports, require) {\n\n\tvar html = require(14);\n\tvar restAPI=require(2);\n\tvar pageManager=require(3);\n\tvar common=require(1);\n\t\n\t    var paramFromURL = common.utils.getInfoFromURL().param;\n\t\n\t    var chartJsonData = {};\n\t\n\t    restAPI.equipmentData = {\n\t        getEquimentData: {//圆形仪表盘接口\n\t            url: 'equimentRest/restEquiment/equimentData/getEquimentData',\n\t            param: ['erId', 'eupId', 'mac']\n\t        },\n\t        getEquimentDetailData: {\n\t            url: 'equimentRest/restEquiment/equimentData/getEquimentDetailData',\n\t            param: ['erId', 'mac', 'eupId']\n\t        },\n\t        changeEquipmentName: {\n\t            url: 'equimentRest/restEquiment/equiment/position',\n\t            param: ['eupId', 'erId', 'name']\n\t        },\n\t        //关机\n\t        clientOFF: {\n\t            url: 'equimentRest/restEquiment/equimentComm/off',\n\t            param: ['mac', 'eupId']\n\t        },\n\t        //设备常量\n\t        sheScreen: {\n\t            url: 'equimentRest/restEquiment/equimentComm/bright',\n\t            param: ['mac', 'eupId']\n\t        },\n\t        //设备常量关闭\n\t        sheScreenOFF: {\n\t            url: 'equimentRest/restEquiment/equimentComm/OffBright',\n\t            param: ['mac', 'eupId']\n\t        },\n\t        getTicket: {\n\t            // url: 'http://wwwv.applinzi.com/movieEnglishService/getSignature.php'\n\t            url: 'equimentRest/restEquiment/weixin/getTicket'\n\t        }\n\t    };\n\t\n\t    function getShareURL(chartJsonData) {\n\t        var jsonData = JSON.stringify(chartJsonData);\n\t        var shareURL = location.href.split('#')[0] + '#p6-play?coverPage=true&page=p6-play&share=true&data=' + jsonData;\n\t        // history.replaceState({share:true}, '分享页', shareURL);\n\t        return shareURL;\n\t    }\n\t\n\t\n\t    var scope = {\n\t        equipmentName: '',\n\t        onClickEquipmentName: function () {\n\t            $('#changeNameWrapper').fadeIn(200);\n\t        },\n\t        onClickShare: function () {\n\t            $('#share').fadeIn(200);\n\t        },\n\t        onClickShareWrapper: function () {\n\t            $('#share').fadeOut(200);\n\t        },\n\t        onClickShutdown: function () {\n\t            $(this).before(\"<div class='hide-box'></div>\");\n\t            $('.hide-box').fadeOut(28000);\n\t\n\t            pageManager.ajaxManager({\n\t                url: restAPI.equipmentData.clientOFF.url,\n\t                data: {\n\t                    mac: paramFromURL.mac,\n\t                    eupId: paramFromURL.eupId\n\t                },\n\t                success: function (data) {\n\t                    if (data.code != 0) {\n\t                        alert(data.message);\n\t                    } else {\n\t                        alert(\"设备关闭成功!\");\n\t                        // renderChart(res.data);\n\t                    }\n\t                    $('.hide-box').remove();\n\t                }\n\t            });\n\t        },\n\t        //设备关闭\n\t        onClickSheScreenOFF: function () {\n\t            $('#p6DataSheScreen').hide();\n\t\n\t            $(this).before(\"<div class='hide-box2'></div>\");\n\t            $('.hide-box2').fadeOut(28000);\n\t\n\t            pageManager.ajaxManager({\n\t                url: restAPI.equipmentData.sheScreenOFF.url,\n\t                data: {\n\t                    mac: paramFromURL.mac,\n\t                    eupId: paramFromURL.eupId\n\t                },\n\t                success: function (data) {\n\t                    if (data.code != 0) {\n\t\n\t                        alert(data.message);\n\t                        if (1001 == data.code) {\n\t//                    \t   $('#p6DataSheScreenOff').fadeOut();\n\t//                           $('#p6DataSheScreen').fadeIn();\n\t                            $('#p6DataSheScreenOff').hide();\n\t                            $('#p6DataSheScreen').show();\n\t                        }\n\t\n\t                    } else {\n\t                        $('#p6DataSheScreenOff').hide();\n\t                        $('#p6DataSheScreen').show();\n\t                    }\n\t\n\t                    $('.hide-box2').remove();\n\t                }\n\t            });\n\t            //shutdown();\n\t\n\t        },\n\t        //设备常亮\n\t        onClickSheScreen: function () {\n\t            $('#p6DataSheScreenOff').hide();\n\t            $(this).before(\"<div class='hide-box2'></div>\");\n\t            $('.hide-box2').fadeOut(28000);\n\t\n\t            pageManager.ajaxManager({\n\t                url: restAPI.equipmentData.sheScreen.url,\n\t                data: {\n\t                    mac: paramFromURL.mac,\n\t                    eupId: paramFromURL.eupId\n\t                },\n\t                success: function (data) {\n\t\n\t                    if (data.code != 0) {\n\t                        $('.hide-box').remove();\n\t                        alert(data.message);\n\t                        if (1001 == data.code) {\n\t//                        \t   $('#p6DataSheScreen').fadeOut();\n\t//                               $('#p6DataSheScreenOff').fadeIn();\n\t                            $('#p6DataSheScreen').hide();\n\t                            $('#p6DataSheScreenOff').show();\n\t                        }\n\t                    } else {\n\t                        // renderChart(res.data);\n\t//                        $('#p6DataSheScreen').fadeOut();\n\t//                        $('#p6DataSheScreenOff').fadeIn();\n\t                        $('#p6DataSheScreen').hide();\n\t                        $('#p6DataSheScreenOff').show();\n\t                    }\n\t\n\t                    $('.hide-box2').remove();\n\t                }\n\t            });\n\t            //  shutdown();\n\t\n\t        },\n\t        onClickPrimary: function () {\n\t            var name = $('#changeNameWrapper input').val();\n\t            if (name.length > 16) {\n\t                alert(\"设备名称不能超过16位\");\n\t            }\n\t            pageManager.requestBackend({\n\t                url: restAPI.equipmentData.changeEquipmentName.url,\n\t                param: {\n\t                    name: name,\n\t                    erId: paramFromURL.erId,\n\t                    eupId: paramFromURL.eupId\n\t                },\n\t                success: function (data) {\n\t                    $('#equipmentName').text(name.trim() === '' ? '未命名' : name);\n\t                    pageManager.showTooltip('修改成功', 'success');\n\t                }\n\t            });\n\t            $('.js_dialog').fadeOut(200);\n\t        },\n\t        onClickCancel: function () {\n\t            $('.js_dialog').fadeOut(200);\n\t        }\n\t    };\n\t\n\t    pageManager.initPage(html, 'p6-data', scope, afterInitPage);\n\t\n\t\n\t    function renderChart(chartSelector, data, range) {\n\t        // 基于准备好的dom，初始化echarts实例\n\t        var myfirstChart = echarts.init($(chartSelector)[0]);\n\t        // 指定图表的配置项和数据\n\t        var option = {\n\t            title: {\n\t                text: data.text + '-48小时记录',\n\t                textStyle: {\n\t                    color: \"#ffffff\",\n\t                    fontSize: 16,\n\t                },\n\t                x: \"center\",\n\t\n\t                bottom: 0,\n\t            },\n\t            color: ['#ffffff'],\n\t            // tooltip: {\n\t            //     trigger: 'axis',\n\t            //     axisPointer: { // 坐标轴指示器，坐标轴触发有效\n\t            //         type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n\t            //     }\n\t            // },\n\t            grid: {\n\t                left: '40',\n\t                right: '2%',\n\t                bottom: '60',\n\t                containLabel: false\n\t            },\n\t            xAxis: [{\n\t                type: 'category',\n\t                data: data.data.x,\n\t                axisTick: {\n\t                    alignWithLabel: true,\n\t                },\n\t                axisLine: { //坐标轴边线颜色\n\t                    lineStyle: {\n\t                        color: ['#ffffff']\n\t                    }\n\t                },\n\t                axisLable: {\n\t                    show: false\n\t                }\n\t            }],\n\t            yAxis: [{\n\t                type: 'value',\n\t                name: '',\n\t                // min: range[0],\n\t                // max: range[1],\n\t                position: 'left',\n\t                axisLine: {\n\t                    lineStyle: {\n\t                        color: ['#ffffff']\n\t                    }\n\t                },\n\t                axisLabel: {\n\t                    textStyle: {\n\t                        color: ['#ffffff']\n\t                    }\n\t                }\n\t            }],\n\t            series: [{\n\t                name: 'pm2.5',\n\t                type: 'bar',\n\t                barWidth: 5,\n\t                data: data.data.y\n\t            }]\n\t        };\n\t        myfirstChart.setOption(option);\n\t    }\n\t\n\t    function renderCircleBoard(selector, frontRange, backRange, value, type) {\n\t        var circleElement = $(selector);\n\t        //最小值\n\t        var minA = frontRange[0];\n\t        //最大值\n\t        var maxA = frontRange[1];\n\t        //具体数字\n\t        var originalNum = parseFloat(value);\n\t        //获得数字旋转度数\n\t        var num = 180 * (originalNum - minA) / (maxA - minA);\n\t        circleElement.find('.big-number').text(isNaN(originalNum) ? '--' : value);\n\t        if (isNaN(originalNum)) {\n\t            num = 0\n\t        }\n\t        if (num <= 180) {\n\t            animateIt(circleElement, num);\n\t        } else {\n\t            animateIt(circleElement, 180);\n\t        }\n\t        function animateIt(circleElement, num) {\n\t            var $element = circleElement.find('.out-cricle');\n\t            $element.attr({style: \"transform: rotate(0deg)\"});\n\t            setTimeout(function () {\n\t                $element.attr({style: \"transform: rotate(\" + num + \"deg); transition: all 2s ease\"});\n\t            }, 500);\n\t        }\n\t\n\t        //判断背景环颜色\n\t        if (isNaN(originalNum)) {\n\t            circleElement.addClass('dial-box-white');\n\t        } else {\n\t            //hack pm2.5\n\t            if (selector === '.dial-box1') {\n\t                var stages = [0, 35, 75, 115, 150, 250, 1000];\n\t                var stageName = ['优', '良', '轻度污染', '中度污染', '重度污染', '严重污染'];\n\t                var colorStage = [75, 150];\n\t                var colorName = '';\n\t\n\t                for (var i = 0, j = i + 1; i < stages.length - 1; i++, j = i + 1) {\n\t                    //chenhui添加修改originalNum > stages[i]\n\t                    if (originalNum >= stages[i] && originalNum <= stages[j]) {\n\t                        circleElement.find('.small-number').text(stageName[i]);\n\t                        if (originalNum <= colorStage[0]) {\n\t                            colorName = 'dial-box-blue';\n\t                            renderWarningMessage(type, 0);\n\t                        } else if (originalNum > colorStage[0] && originalNum <= colorStage[1]) {\n\t                            colorName = 'dial-box-yellow';\n\t                            renderWarningMessage(type, 1);\n\t                        } else {\n\t                            colorName = 'dial-box-red';\n\t                            renderWarningMessage(type, 2);\n\t                        }\n\t                        break;\n\t                    }\n\t                }\n\t                circleElement.addClass(colorName);\n\t                return;\n\t            }\n\t            function getText(index) {\n\t                var levelMap = [\n\t                    ['安全', '优'],\n\t                    ['轻度', '中等'],\n\t                    ['重度', '严重']\n\t                ];\n\t                return (type === 'ch2' || type === 'tvoc' || type === 'pollutionLevel') ? levelMap[index][0] : levelMap[index][1];\n\t            }\n\t\n\t            if (originalNum < backRange[0]) {\n\t                circleElement.addClass('dial-box-blue');\n\t                circleElement.find('.small-number').text(getText(0));\n\t                renderWarningMessage(type, 0);\n\t            } else if (backRange[0] <= originalNum && originalNum < backRange[1]) {\n\t                circleElement.addClass('dial-box-yellow');\n\t                circleElement.find('.small-number').text(getText(1));\n\t                renderWarningMessage(type, 1);\n\t            } else {\n\t                circleElement.addClass('dial-box-red');\n\t                circleElement.find('.small-number').text(getText(2));\n\t                renderWarningMessage(type, 2);\n\t            }\n\t\n\t            function renderWarningMessage(type, level) {\n\t                var textMap = {\n\t                    ch2: {\n\t                        name: '甲醛',\n\t                        standard: '0.1mg/m³',\n\t                        solution: '净化措施或通风换气',\n\t                        justDoIt: '通风换气'\n\t                    },\n\t                    tvoc: {\n\t                        name: '化学污染物',\n\t                        standard: '0.6mg/m³',\n\t                        solution: '净化措施或通风换气',\n\t                        justDoIt: '通风换气'\n\t                    },\n\t                    pm25: {\n\t                        name: 'PM2.5',\n\t                        standard: '75μg/m³',\n\t                        solution: '净化措施',\n\t                        justDoIt: '净化措施'\n\t                    }\n\t                };\n\t                var textMapTemplates = [\n\t                    '{{name}}国家标准为{{standard}}，您所处的环境安全。请继续保持哦！',\n\t                    '您所处的环境{{name}}超标，请及时采取{{solution}}。说真的，我都替你着急！',\n\t                    '您的您所处的环境{{name}}超标严重，请立刻{{justDoIt}}。赶紧的吧！急死我了！！'\n\t                ];\n\t                for (var name in textMap) {\n\t                    var arr = [];\n\t                    var data = textMap[name];\n\t                    textMapTemplates.forEach(function (v2) {\n\t                        var resultText = v2.replace(/\\{\\{([^\\{]+)\\}\\}/g, function(m0, m1){\n\t                            return data[m1];\n\t                        });\n\t                        arr.push(resultText);\n\t                    });\n\t                    textMap[name] = arr;\n\t                }\n\t                var className = ['good-message', 'remind-message', 'Warning-message'][level];\n\t                var text = textMap[type];\n\t                if (text) {\n\t                    text = text[level];\n\t                    var htmlStr = '<p class=\"' + className + '\">' + text + '</p>';\n\t                    $('.page-p6-data').find('.' + type + '-message').html(htmlStr);\n\t                }\n\t            }\n\t        }\n\t    }\n\t\n\t\n\t    function afterInitPage() {\n\t        pageManager.setRefreshPage(['p6-data'], function () {\n\t            reDrawCircleBoard();\n\t            reDrawChart();\n\t        });\n\t        reDrawCircleBoard();\n\t        setInterval(reDrawCircleBoard, 1000 * 60 * 5);\n\t\n\t        function reDrawCircleBoard() {\n\t            pageManager.requestBackend({\n\t                url: restAPI.equipmentData.getEquimentData.url,\n\t                param: {\n\t                    erId: paramFromURL.erId || 0,\n\t                    eupId: paramFromURL.eupId || 0,\n\t                    mac: paramFromURL.mac || 0\n\t                },\n\t                success: function (data) {\n\t                    var d = data.equimentData;\n\t                    if (d && Object.prototype.toString.call(d) !== '[object Object]') {\n\t                        pageManager.showTooltip('数据有误');\n\t                        return;\n\t                    }\n\t                    var circleBoardModel = [\n\t                        {\n\t                            selector: '.dial-box1',\n\t                            frontRange: [0, 999],\n\t                            backRange: [76, 150],\n\t                            value: d.pm25,\n\t                            type: 'pm25',\n\t                        },\n\t                        {\n\t                            selector: '.dial-box2',\n\t                            frontRange: [0, 3],\n\t                            backRange: [0.1, 0.2],\n\t                            value: d.ch2,\n\t                            type: 'ch2',\n\t                        },\n\t                        {\n\t                            selector: '.dial-box3',\n\t                            frontRange: [0, 10],\n\t                            backRange: [0.6, 2],\n\t                            value: d.tvoc,\n\t                            type: 'tvoc',\n\t                        },\n\t                        {\n\t                            selector: '.dial-box4',\n\t                            frontRange: [0, 500],\n\t                            backRange: [101, 201],\n\t                            value: d.pollutionLevel,\n\t                            type: 'pollutionLevel'\n\t                        },\n\t                        {\n\t                            selector: '.dial-box5',\n\t                            frontRange: [-20, 50],\n\t                            backRange: [Infinity, Infinity],\n\t                            value: d.temperature,\n\t                            type: 'temperature'\n\t                        },\n\t                        {\n\t                            selector: '.dial-box6',\n\t                            frontRange: [0, 100],\n\t                            backRange: [Infinity, Infinity],\n\t                            value: d.humity,\n\t                            type: 'humity'\n\t                        }\n\t                    ];\n\t                    chartJsonData.circleBoardModel = circleBoardModel;\n\t                    circleBoardModel.forEach(function (v) {\n\t                        renderCircleBoard(v.selector, v.frontRange, v.backRange, v.value, v.type);\n\t                    });\n\t                    if (paramFromURL.isPrimary != 0) {\n\t                        $('.page-p6-data #equipmentName').hide();\n\t                        $('.page-p6-data #p6DataShutdown').hide();\n\t                        $('.page-p6-data #p6DataSheScreenOff').hide();\n\t                        $('.page-p6-data #p6DataSheScreen').hide();\n\t                    }\n\t                    try {\n\t                        $('.page-p6-data #equipmentName').text((chartJsonData.equipmentName = d.position.trim() === '' ? '未命名' : d.position));\n\t                        chartJsonData.uploadTime = d.uploadTime;\n\t                        renderTime(d.uploadTime, '.page-p6-data .link-info');\n\t                    } catch (ex) {\n\t                    }\n\t                    // changeHistory(chartJsonData);\n\t                    window.shareOption.link = getShareURL(chartJsonData);\n\t\n\t                    function renderTime(_time, selector) {\n\t                        // var _time2 = (new Date()).getTime();\n\t                        // _time = _time2 - _time;\n\t                        // if (_time < 60 * 1000) {\n\t                        //     _time = parseInt(_time / 1000) + '秒前'\n\t                        // } else if (_time >= 60 * 1000 && _time < 60 * 60 * 1000) {\n\t                        //     _time = parseInt(_time / (60 * 1000)) + '分钟前'\n\t                        // } else if (_time >= 60 * 60 * 1000 && _time < 60 * 60 * 24 * 1000) {\n\t                        //     _time = parseInt(_time / (60 * 60 * 1000)) + '小时前'\n\t                        // } else {\n\t                        //     _time = parseInt(_time / (60 * 60 * 24 * 1000)) + '天前'\n\t                        // }\n\t                        $(selector).text(_time || 0);\n\t                    }\n\t                }\n\t            });\n\t        }\n\t\n\t        reDrawChart();\n\t        setInterval(reDrawChart, 1000 * 60 * 60);\n\t\n\t        function reDrawChart() {\n\t            pageManager.requestBackend({\n\t                url: restAPI.equipmentData.getEquimentDetailData.url,\n\t                param: {\n\t                    erId: paramFromURL.erId,\n\t                    mac: paramFromURL.mac,\n\t                    eupId: paramFromURL.eupId\n\t                },\n\t                success: function (data) {\n\t                    // data = {\n\t                    //     \"equimentDetailData\": {\n\t                    //         \"ch2\": [\n\t                    //             {\n\t                    //                 \"time\": \"123100\",\n\t                    //                 \"value\": \"1.5\"\n\t                    //             },\n\t                    //             {\n\t                    //                 \"time\": \"123109\",\n\t                    //                 \"value\": \"1.7\"\n\t                    //             },\n\t                    //             {\n\t                    //                 \"time\": \"123110\",\n\t                    //                 \"value\": \"0.5\"\n\t                    //             },\n\t                    //             {\n\t                    //                 \"time\": \"010123\",\n\t                    //                 \"value\": \"0.5\"\n\t                    //             },\n\t                    //             {\n\t                    //                 \"time\": \"010122\",\n\t                    //                 \"value\": \"0.5\"\n\t                    //             }\n\t                    //         ],\n\t                    //         \"pollutionLevel\": [],\n\t                    //         \"tvoc\": [],\n\t                    //         \"humity\": [],\n\t                    //         \"pm25\": [],\n\t                    //         \"temperature\": []\n\t                    //     }\n\t                    // };\n\t                    var d = data.equimentDetailData;\n\t                    if (d && Object.prototype.toString.call(d) !== '[object Object]') {\n\t                        pageManager.showTooltip('数据有误');\n\t                        return;\n\t                    }\n\t                    d = convertData(d);\n\t                    var chartModel = [\n\t                        {\n\t                            selector: '#first-echart-box',\n\t                            data: d.ch2,\n\t                            text: '甲醛',\n\t                            range: [0, 2 + 2]\n\t                        },\n\t                        {\n\t                            selector: '#second-echart-box',\n\t                            data: d.pollutionLevel,\n\t                            text: '污染指数',\n\t                            range: [0, 500 + 20]\n\t                        },\n\t                        {\n\t                            selector: '#three-echart-box',\n\t                            data: d.tvoc,\n\t                            text: 'TVOC',\n\t                            range: [0, 10 + 5]\n\t                        },\n\t                        {\n\t                            selector: '#four-echart-box',\n\t                            data: d.humity,\n\t                            text: '湿度',\n\t                            range: [0, 100 + 10]\n\t                        },\n\t                        {\n\t                            selector: '#five-echart-box',\n\t                            data: d.pm25,\n\t                            text: 'PM2.5',\n\t                            range: [0, 1000 + 30]\n\t                        },\n\t                        {\n\t                            selector: '#six-echart-box',\n\t                            data: d.temperature,\n\t                            text: '温度',\n\t                            range: [-20, 50 + 10]\n\t                        }\n\t                    ];\n\t                    chartModel.forEach(function (v) {\n\t                        renderChart(v.selector, v, v.range);\n\t                    });\n\t\n\t                    //对原始数据进行转换\n\t                    function convertData(data) {\n\t                        var obj = {};\n\t                        for (var name in data) {\n\t                            var items = data[name];\n\t                            var itemLength = items.length;\n\t                            var timeRegex = /(\\d{2})(\\d{2})(\\d{2})/;\n\t                            var timeAmount = 48;\n\t                            var dataArray = new Array(timeAmount);\n\t                            obj[name] = {x: [], y: []};\n\t                            //如果当前柱形图有数据\n\t                            if (itemLength > 0) {\n\t                                //先对数据排序, 注意12月31日和第二年1月1日跨年的问题\n\t                                items = items.sort(function (a, b) {\n\t                                    var reg = timeRegex;\n\t                                    var v1 = a.time.match(reg);\n\t                                    var v2 = b.time.match(reg);\n\t                                    var r1 = parseInt(v1[1]) - parseInt(v2[1]);\n\t                                    var r2 = parseInt(v1[2]) - parseInt(v2[2]);\n\t                                    var r3 = parseInt(v1[3]) - parseInt(v2[3]);\n\t                                    if (r1 === 0) {\n\t                                        if (r2 === 0) {\n\t                                            return r3\n\t                                        } else {\n\t                                            return r2;\n\t                                        }\n\t                                    } else {\n\t                                        if (Math.abs(r1) > 2) {//当跨年情况出现时月份(1月)小的反而排在后边\n\t                                            return -r1;\n\t                                        } else {\n\t                                            return r1;\n\t                                        }\n\t                                    }\n\t                                });\n\t                                var n = timeAmount - 1;\n\t                                var rightSideItem = items.pop();\n\t                                var itemMatch = rightSideItem.time.match(timeRegex);\n\t                                var maxTime = parseInt(itemMatch[3]);\n\t                                var maxDay = parseInt(itemMatch[2]);\n\t                                var maxMonth = parseInt(itemMatch[1]);\n\t                                var _time;\n\t                                var _value;\n\t                                do {\n\t                                    _time = (maxMonth < 10 ? ('0' + maxMonth) : maxMonth.toString()) + (maxDay < 10 ? ('0' + maxDay) : maxDay.toString()) + (maxTime < 10 ? ('0' + maxTime) : maxTime.toString());\n\t                                    _value = 0;\n\t                                    dataArray[n] = {\n\t                                        time: _time,\n\t                                        value: _value\n\t                                    };\n\t\n\t                                    if (rightSideItem && rightSideItem.time === _time) {\n\t                                        dataArray[n].value = rightSideItem.value;\n\t                                        rightSideItem = items.pop();\n\t                                    }\n\t\n\t                                    if (--maxTime < 0) {\n\t                                        maxTime = 23;\n\t                                        if (maxDay === 1 && maxMonth === 1) {\n\t                                            maxDay = 31;\n\t                                            maxMonth = 12;\n\t                                        } else {\n\t                                            maxDay -= 1;\n\t                                        }\n\t                                    }\n\t                                } while (n--)\n\t                                for (var i = 0, len = dataArray.length; i < len; i++) {\n\t                                    var _t = dataArray[i].time.match(timeRegex)[3] + ':00';\n\t                                    obj[name].x.push(_t);\n\t                                    obj[name].y.push(dataArray[i].value);\n\t                                }\n\t                            }\n\t\n\t                        }\n\t                        return obj;\n\t                    }\n\t                }\n\t            });\n\t        }\n\t\n\t\n\t    }\n\t\n\t    //获取jsSDK的 ticket\n\t    function getTicket() {\n\t        var dfd = new $.Deferred();\n\t        pageManager.ajaxManager({\n\t            url: restAPI.equipmentData.getTicket.url,\n\t            type: 'post',\n\t            data: {\n\t                url: location.href.split('#')[0]//encodeURIComponent(location.href.split('#')[0])\n\t            },\n\t            dataType: 'json',\n\t            success: function (res) {\n\t                if (res.code === 0) {\n\t                    dfd.resolve(res.data);\n\t                }\n\t            },\n\t            fail: function (ex) {\n\t                dfd.reject(ex);\n\t            }\n\t        });\n\t\n\t        return dfd.promise();\n\t    }\n\t\n\t    getTicket().then(function (res) {\n\t        wx.config({\n\t            beta: true,\n\t            debug: false,\n\t            appId: res.appid,\n\t            timestamp: res.timestamp,\n\t            nonceStr: res.nonceStr,\n\t            signature: res.signature,\n\t            jsApiList: [\n\t                'onMenuShareTimeline',\n\t                'onMenuShareAppMessage',\n\t                'onMenuShareQQ',\n\t                'onMenuShareWeibo',\n\t                'onMenuShareQZone',\n\t                // 'startRecord',\n\t                // 'stopRecord',\n\t                // 'onVoiceRecordEnd',\n\t                // 'playVoice',\n\t                // 'pauseVoice',\n\t                // 'stopVoice',\n\t                // 'onVoicePlayEnd',\n\t                // 'uploadVoice',\n\t                // 'downloadVoice',\n\t                'chooseImage',\n\t                'previewImage',\n\t                'uploadImage',\n\t                'downloadImage',\n\t                // 'translateVoice',\n\t                'getNetworkType',\n\t                'openLocation',\n\t                'getLocation',\n\t                // 'hideOptionMenu',\n\t                // 'showOptionMenu',\n\t                // 'hideMenuItems',\n\t                // 'showMenuItems',\n\t                // 'hideAllNonBaseMenuItem',\n\t                // 'showAllNonBaseMenuItem',\n\t                'closeWindow',\n\t                // 'scanQRCode',\n\t                // 'chooseWXPay',\n\t                // 'openProductSpecificView',\n\t                // 'addCard',\n\t                // 'chooseCard',\n\t                // 'openCard'\n\t            ]\n\t        });\n\t\n\t\n\t        wx.ready(function () {\n\t            wx.invoke('setNavigationBarColor', {\n\t                color: 'green'\n\t            });\n\t\n\t            wx.onMenuShareTimeline(window.shareOption);\n\t            wx.onMenuShareQQ(window.shareOption);\n\t            wx.onMenuShareAppMessage(window.shareOption);\n\t\n\t        });\n\t    }, function () {\n\t        console.warn('获取js ticket失败');\n\t    });\n\t\n\n\n/***/ },\n\n/***/ 14:\n/***/ function(module, exports, require) {\n\n\tmodule.exports = \" <div class=\\\"page p6-data black-bgcolor\\\"> <input type=hidden name=title value=空气猫P6plus型 /> <div class=\\\"top-title clearfix\\\"> <a href=javascript:; class=\\\"home fl\\\" id=equipmentName data-bind={text:$root.equipmentName,click:$root.onClickEquipmentName}>未定义</a> <span class=\\\"link-info fr\\\">3分钟前</span> </div> <div class=dial-listbox> <div class=\\\"dial-box dial-box2\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>0.05</span></div> <div class=texting-num>甲醛<span class=mlr5>|</span><span class=small-number>优</span></div> </div> </div> <div class=\\\"dial-box dial-box3\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>--</span></div> <div class=texting-num>TVOC<span class=mlr5>|</span><span class=small-number>--</span> </div> </div> </div> <div class=\\\"dial-box dial-box1\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>&mu;g/m³</div> <div class=texting-big-num><span class=big-number>189</span></div> <div class=texting-num>PM2.5<span class=mlr5>|</span><span class=small-number>严重</span> </div> </div> </div> <div class=\\\"dial-box dial-box4\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company></div> <div class=texting-big-num><span class=big-number>430</span></div> <div class=texting-num>污染指数</div> </div> </div> <div class=\\\"dial-box dial-box5 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>℃</div> <div class=texting-big-num><span class=big-number>27</span></div> <div class=texting-num>温度</div> </div> </div> <div class=\\\"dial-box dial-box6 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>%</div> <div class=texting-big-num><span class=big-number>56</span></div> <div class=texting-num>湿度</div> </div> </div> <div class=clearfix></div> </div> <div class=prompt-message> <div class=ch2-message></div> <div class=tvoc-message></div> <div class=pm25-message></div> </div> <div class=echartsbox> <div id=first-echart-box class=first-echart-box></div> <div id=three-echart-box class=three-echart-box></div> <div id=five-echart-box class=five-echart-box></div> <div id=second-echart-box class=second-echart-box></div> <div id=six-echart-box class=six-echart-box></div> <div id=four-echart-box class=four-echart-box></div> </div> <div class=foot-tabbar> <div class=\\\"weui-tabbar weui-tabbar-link\\\"> <a href=javascript:; class=weui-tabbar__item id=p6DataShutdown data-bind=click:$root.onClickShutdown> <img src=app/images/Shutdown.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>关机</p> </a> <a href=javascript:; class=weui-tabbar__item id=p6DataSheScreenOff data-bind=click:$root.onClickSheScreenOFF> <img src=app/images/Always.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>设备常亮</p> </a> <a href=javascript:; class=weui-tabbar__item id=p6DataSheScreen style=display:none data-bind=click:$root.onClickSheScreen> <img src=app/images/Always.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>设备关闭</p> </a> <a href=javascript:; class=weui-tabbar__item data-bind=click:$root.onClickShare> <img src=app/images/share.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>分享</p> </a> </div> </div> <div class=none-div></div> <div id=dialogs> <div class=js_dialog id=changeNameWrapper style=display:none> <div class=weui-mask></div> <div class=weui-dialog> <div class=weui-dialog__hd><strong class=weui-dialog__title>请给设备命名</strong></div> <div class=weui-dialog__bd> <input class=\\\"weui-input input-text\\\" type=text placeholder=请输入设备名称> </div> <div class=weui-dialog__ft> <a href=javascript:; class=\\\"weui-dialog__btn weui-dialog__btn_primary\\\" data-bind=click:$root.onClickPrimary>确定</a> <a href=javascript:; class=\\\"weui-dialog__btn weui-dialog__btn_default\\\" data-bind=click:$root.onClickCancel>取消</a> </div> </div> </div> </div> <div id=shareWrapper data-bind=click:$root.onClickShareWrapper> <div class=js_dialog id=share style=display:none> <div class=weui-mask></div> <div class=share-layer> <img class=share-pic src=app/images/sharePic.png> </div> </div> </div> </div> \";\n\n/***/ }\n\n})","var html = require(\"html-loader?-attrs!../../pages/p6-board/p6-data.html\");\nvar restAPI=require(\"restAPI\");\nvar pageManager=require(\"pageManager\");\nvar common=require(\"common\");\n\n    var paramFromURL = common.utils.getInfoFromURL().param;\n\n    var chartJsonData = {};\n\n    restAPI.equipmentData = {\n        getEquimentData: {//圆形仪表盘接口\n            url: 'equimentRest/restEquiment/equimentData/getEquimentData',\n            param: ['erId', 'eupId', 'mac']\n        },\n        getEquimentDetailData: {\n            url: 'equimentRest/restEquiment/equimentData/getEquimentDetailData',\n            param: ['erId', 'mac', 'eupId']\n        },\n        changeEquipmentName: {\n            url: 'equimentRest/restEquiment/equiment/position',\n            param: ['eupId', 'erId', 'name']\n        },\n        //关机\n        clientOFF: {\n            url: 'equimentRest/restEquiment/equimentComm/off',\n            param: ['mac', 'eupId']\n        },\n        //设备常量\n        sheScreen: {\n            url: 'equimentRest/restEquiment/equimentComm/bright',\n            param: ['mac', 'eupId']\n        },\n        //设备常量关闭\n        sheScreenOFF: {\n            url: 'equimentRest/restEquiment/equimentComm/OffBright',\n            param: ['mac', 'eupId']\n        },\n        getTicket: {\n            // url: 'http://wwwv.applinzi.com/movieEnglishService/getSignature.php'\n            url: 'equimentRest/restEquiment/weixin/getTicket'\n        }\n    };\n\n    function getShareURL(chartJsonData) {\n        var jsonData = JSON.stringify(chartJsonData);\n        var shareURL = location.href.split('#')[0] + '#p6-play?coverPage=true&page=p6-play&share=true&data=' + jsonData;\n        // history.replaceState({share:true}, '分享页', shareURL);\n        return shareURL;\n    }\n\n\n    var scope = {\n        equipmentName: '',\n        onClickEquipmentName: function () {\n            $('#changeNameWrapper').fadeIn(200);\n        },\n        onClickShare: function () {\n            $('#share').fadeIn(200);\n        },\n        onClickShareWrapper: function () {\n            $('#share').fadeOut(200);\n        },\n        onClickShutdown: function () {\n            $(this).before(\"<div class='hide-box'></div>\");\n            $('.hide-box').fadeOut(28000);\n\n            pageManager.ajaxManager({\n                url: restAPI.equipmentData.clientOFF.url,\n                data: {\n                    mac: paramFromURL.mac,\n                    eupId: paramFromURL.eupId\n                },\n                success: function (data) {\n                    if (data.code != 0) {\n                        alert(data.message);\n                    } else {\n                        alert(\"设备关闭成功!\");\n                        // renderChart(res.data);\n                    }\n                    $('.hide-box').remove();\n                }\n            });\n        },\n        //设备关闭\n        onClickSheScreenOFF: function () {\n            $('#p6DataSheScreen').hide();\n\n            $(this).before(\"<div class='hide-box2'></div>\");\n            $('.hide-box2').fadeOut(28000);\n\n            pageManager.ajaxManager({\n                url: restAPI.equipmentData.sheScreenOFF.url,\n                data: {\n                    mac: paramFromURL.mac,\n                    eupId: paramFromURL.eupId\n                },\n                success: function (data) {\n                    if (data.code != 0) {\n\n                        alert(data.message);\n                        if (1001 == data.code) {\n//                    \t   $('#p6DataSheScreenOff').fadeOut();\n//                           $('#p6DataSheScreen').fadeIn();\n                            $('#p6DataSheScreenOff').hide();\n                            $('#p6DataSheScreen').show();\n                        }\n\n                    } else {\n                        $('#p6DataSheScreenOff').hide();\n                        $('#p6DataSheScreen').show();\n                    }\n\n                    $('.hide-box2').remove();\n                }\n            });\n            //shutdown();\n\n        },\n        //设备常亮\n        onClickSheScreen: function () {\n            $('#p6DataSheScreenOff').hide();\n            $(this).before(\"<div class='hide-box2'></div>\");\n            $('.hide-box2').fadeOut(28000);\n\n            pageManager.ajaxManager({\n                url: restAPI.equipmentData.sheScreen.url,\n                data: {\n                    mac: paramFromURL.mac,\n                    eupId: paramFromURL.eupId\n                },\n                success: function (data) {\n\n                    if (data.code != 0) {\n                        $('.hide-box').remove();\n                        alert(data.message);\n                        if (1001 == data.code) {\n//                        \t   $('#p6DataSheScreen').fadeOut();\n//                               $('#p6DataSheScreenOff').fadeIn();\n                            $('#p6DataSheScreen').hide();\n                            $('#p6DataSheScreenOff').show();\n                        }\n                    } else {\n                        // renderChart(res.data);\n//                        $('#p6DataSheScreen').fadeOut();\n//                        $('#p6DataSheScreenOff').fadeIn();\n                        $('#p6DataSheScreen').hide();\n                        $('#p6DataSheScreenOff').show();\n                    }\n\n                    $('.hide-box2').remove();\n                }\n            });\n            //  shutdown();\n\n        },\n        onClickPrimary: function () {\n            var name = $('#changeNameWrapper input').val();\n            if (name.length > 16) {\n                alert(\"设备名称不能超过16位\");\n            }\n            pageManager.requestBackend({\n                url: restAPI.equipmentData.changeEquipmentName.url,\n                param: {\n                    name: name,\n                    erId: paramFromURL.erId,\n                    eupId: paramFromURL.eupId\n                },\n                success: function (data) {\n                    $('#equipmentName').text(name.trim() === '' ? '未命名' : name);\n                    pageManager.showTooltip('修改成功', 'success');\n                }\n            });\n            $('.js_dialog').fadeOut(200);\n        },\n        onClickCancel: function () {\n            $('.js_dialog').fadeOut(200);\n        }\n    };\n\n    pageManager.initPage(html, 'p6-data', scope, afterInitPage);\n\n\n    function renderChart(chartSelector, data, range) {\n        // 基于准备好的dom，初始化echarts实例\n        var myfirstChart = echarts.init($(chartSelector)[0]);\n        // 指定图表的配置项和数据\n        var option = {\n            title: {\n                text: data.text + '-48小时记录',\n                textStyle: {\n                    color: \"#ffffff\",\n                    fontSize: 16,\n                },\n                x: \"center\",\n\n                bottom: 0,\n            },\n            color: ['#ffffff'],\n            // tooltip: {\n            //     trigger: 'axis',\n            //     axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            //         type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n            //     }\n            // },\n            grid: {\n                left: '40',\n                right: '2%',\n                bottom: '60',\n                containLabel: false\n            },\n            xAxis: [{\n                type: 'category',\n                data: data.data.x,\n                axisTick: {\n                    alignWithLabel: true,\n                },\n                axisLine: { //坐标轴边线颜色\n                    lineStyle: {\n                        color: ['#ffffff']\n                    }\n                },\n                axisLable: {\n                    show: false\n                }\n            }],\n            yAxis: [{\n                type: 'value',\n                name: '',\n                // min: range[0],\n                // max: range[1],\n                position: 'left',\n                axisLine: {\n                    lineStyle: {\n                        color: ['#ffffff']\n                    }\n                },\n                axisLabel: {\n                    textStyle: {\n                        color: ['#ffffff']\n                    }\n                }\n            }],\n            series: [{\n                name: 'pm2.5',\n                type: 'bar',\n                barWidth: 5,\n                data: data.data.y\n            }]\n        };\n        myfirstChart.setOption(option);\n    }\n\n    function renderCircleBoard(selector, frontRange, backRange, value, type) {\n        var circleElement = $(selector);\n        //最小值\n        var minA = frontRange[0];\n        //最大值\n        var maxA = frontRange[1];\n        //具体数字\n        var originalNum = parseFloat(value);\n        //获得数字旋转度数\n        var num = 180 * (originalNum - minA) / (maxA - minA);\n        circleElement.find('.big-number').text(isNaN(originalNum) ? '--' : value);\n        if (isNaN(originalNum)) {\n            num = 0\n        }\n        if (num <= 180) {\n            animateIt(circleElement, num);\n        } else {\n            animateIt(circleElement, 180);\n        }\n        function animateIt(circleElement, num) {\n            var $element = circleElement.find('.out-cricle');\n            $element.attr({style: \"transform: rotate(0deg)\"});\n            setTimeout(function () {\n                $element.attr({style: \"transform: rotate(\" + num + \"deg); transition: all 2s ease\"});\n            }, 500);\n        }\n\n        //判断背景环颜色\n        if (isNaN(originalNum)) {\n            circleElement.addClass('dial-box-white');\n        } else {\n            //hack pm2.5\n            if (selector === '.dial-box1') {\n                var stages = [0, 35, 75, 115, 150, 250, 1000];\n                var stageName = ['优', '良', '轻度污染', '中度污染', '重度污染', '严重污染'];\n                var colorStage = [75, 150];\n                var colorName = '';\n\n                for (var i = 0, j = i + 1; i < stages.length - 1; i++, j = i + 1) {\n                    //chenhui添加修改originalNum > stages[i]\n                    if (originalNum >= stages[i] && originalNum <= stages[j]) {\n                        circleElement.find('.small-number').text(stageName[i]);\n                        if (originalNum <= colorStage[0]) {\n                            colorName = 'dial-box-blue';\n                            renderWarningMessage(type, 0);\n                        } else if (originalNum > colorStage[0] && originalNum <= colorStage[1]) {\n                            colorName = 'dial-box-yellow';\n                            renderWarningMessage(type, 1);\n                        } else {\n                            colorName = 'dial-box-red';\n                            renderWarningMessage(type, 2);\n                        }\n                        break;\n                    }\n                }\n                circleElement.addClass(colorName);\n                return;\n            }\n            function getText(index) {\n                var levelMap = [\n                    ['安全', '优'],\n                    ['轻度', '中等'],\n                    ['重度', '严重']\n                ];\n                return (type === 'ch2' || type === 'tvoc' || type === 'pollutionLevel') ? levelMap[index][0] : levelMap[index][1];\n            }\n\n            if (originalNum < backRange[0]) {\n                circleElement.addClass('dial-box-blue');\n                circleElement.find('.small-number').text(getText(0));\n                renderWarningMessage(type, 0);\n            } else if (backRange[0] <= originalNum && originalNum < backRange[1]) {\n                circleElement.addClass('dial-box-yellow');\n                circleElement.find('.small-number').text(getText(1));\n                renderWarningMessage(type, 1);\n            } else {\n                circleElement.addClass('dial-box-red');\n                circleElement.find('.small-number').text(getText(2));\n                renderWarningMessage(type, 2);\n            }\n\n            function renderWarningMessage(type, level) {\n                var textMap = {\n                    ch2: {\n                        name: '甲醛',\n                        standard: '0.1mg/m³',\n                        solution: '净化措施或通风换气',\n                        justDoIt: '通风换气'\n                    },\n                    tvoc: {\n                        name: '化学污染物',\n                        standard: '0.6mg/m³',\n                        solution: '净化措施或通风换气',\n                        justDoIt: '通风换气'\n                    },\n                    pm25: {\n                        name: 'PM2.5',\n                        standard: '75μg/m³',\n                        solution: '净化措施',\n                        justDoIt: '净化措施'\n                    }\n                };\n                var textMapTemplates = [\n                    '{{name}}国家标准为{{standard}}，您所处的环境安全。请继续保持哦！',\n                    '您所处的环境{{name}}超标，请及时采取{{solution}}。说真的，我都替你着急！',\n                    '您的您所处的环境{{name}}超标严重，请立刻{{justDoIt}}。赶紧的吧！急死我了！！'\n                ];\n                for (var name in textMap) {\n                    var arr = [];\n                    var data = textMap[name];\n                    textMapTemplates.forEach(function (v2) {\n                        var resultText = v2.replace(/\\{\\{([^\\{]+)\\}\\}/g, function(m0, m1){\n                            return data[m1];\n                        });\n                        arr.push(resultText);\n                    });\n                    textMap[name] = arr;\n                }\n                var className = ['good-message', 'remind-message', 'Warning-message'][level];\n                var text = textMap[type];\n                if (text) {\n                    text = text[level];\n                    var htmlStr = '<p class=\"' + className + '\">' + text + '</p>';\n                    $('.page-p6-data').find('.' + type + '-message').html(htmlStr);\n                }\n            }\n        }\n    }\n\n\n    function afterInitPage() {\n        pageManager.setRefreshPage(['p6-data'], function () {\n            reDrawCircleBoard();\n            reDrawChart();\n        });\n        reDrawCircleBoard();\n        setInterval(reDrawCircleBoard, 1000 * 60 * 5);\n\n        function reDrawCircleBoard() {\n            pageManager.requestBackend({\n                url: restAPI.equipmentData.getEquimentData.url,\n                param: {\n                    erId: paramFromURL.erId || 0,\n                    eupId: paramFromURL.eupId || 0,\n                    mac: paramFromURL.mac || 0\n                },\n                success: function (data) {\n                    var d = data.equimentData;\n                    if (d && Object.prototype.toString.call(d) !== '[object Object]') {\n                        pageManager.showTooltip('数据有误');\n                        return;\n                    }\n                    var circleBoardModel = [\n                        {\n                            selector: '.dial-box1',\n                            frontRange: [0, 999],\n                            backRange: [76, 150],\n                            value: d.pm25,\n                            type: 'pm25',\n                        },\n                        {\n                            selector: '.dial-box2',\n                            frontRange: [0, 3],\n                            backRange: [0.1, 0.2],\n                            value: d.ch2,\n                            type: 'ch2',\n                        },\n                        {\n                            selector: '.dial-box3',\n                            frontRange: [0, 10],\n                            backRange: [0.6, 2],\n                            value: d.tvoc,\n                            type: 'tvoc',\n                        },\n                        {\n                            selector: '.dial-box4',\n                            frontRange: [0, 500],\n                            backRange: [101, 201],\n                            value: d.pollutionLevel,\n                            type: 'pollutionLevel'\n                        },\n                        {\n                            selector: '.dial-box5',\n                            frontRange: [-20, 50],\n                            backRange: [Infinity, Infinity],\n                            value: d.temperature,\n                            type: 'temperature'\n                        },\n                        {\n                            selector: '.dial-box6',\n                            frontRange: [0, 100],\n                            backRange: [Infinity, Infinity],\n                            value: d.humity,\n                            type: 'humity'\n                        }\n                    ];\n                    chartJsonData.circleBoardModel = circleBoardModel;\n                    circleBoardModel.forEach(function (v) {\n                        renderCircleBoard(v.selector, v.frontRange, v.backRange, v.value, v.type);\n                    });\n                    if (paramFromURL.isPrimary != 0) {\n                        $('.page-p6-data #equipmentName').hide();\n                        $('.page-p6-data #p6DataShutdown').hide();\n                        $('.page-p6-data #p6DataSheScreenOff').hide();\n                        $('.page-p6-data #p6DataSheScreen').hide();\n                    }\n                    try {\n                        $('.page-p6-data #equipmentName').text((chartJsonData.equipmentName = d.position.trim() === '' ? '未命名' : d.position));\n                        chartJsonData.uploadTime = d.uploadTime;\n                        renderTime(d.uploadTime, '.page-p6-data .link-info');\n                    } catch (ex) {\n                    }\n                    // changeHistory(chartJsonData);\n                    window.shareOption.link = getShareURL(chartJsonData);\n\n                    function renderTime(_time, selector) {\n                        // var _time2 = (new Date()).getTime();\n                        // _time = _time2 - _time;\n                        // if (_time < 60 * 1000) {\n                        //     _time = parseInt(_time / 1000) + '秒前'\n                        // } else if (_time >= 60 * 1000 && _time < 60 * 60 * 1000) {\n                        //     _time = parseInt(_time / (60 * 1000)) + '分钟前'\n                        // } else if (_time >= 60 * 60 * 1000 && _time < 60 * 60 * 24 * 1000) {\n                        //     _time = parseInt(_time / (60 * 60 * 1000)) + '小时前'\n                        // } else {\n                        //     _time = parseInt(_time / (60 * 60 * 24 * 1000)) + '天前'\n                        // }\n                        $(selector).text(_time || 0);\n                    }\n                }\n            });\n        }\n\n        reDrawChart();\n        setInterval(reDrawChart, 1000 * 60 * 60);\n\n        function reDrawChart() {\n            pageManager.requestBackend({\n                url: restAPI.equipmentData.getEquimentDetailData.url,\n                param: {\n                    erId: paramFromURL.erId,\n                    mac: paramFromURL.mac,\n                    eupId: paramFromURL.eupId\n                },\n                success: function (data) {\n                    // data = {\n                    //     \"equimentDetailData\": {\n                    //         \"ch2\": [\n                    //             {\n                    //                 \"time\": \"123100\",\n                    //                 \"value\": \"1.5\"\n                    //             },\n                    //             {\n                    //                 \"time\": \"123109\",\n                    //                 \"value\": \"1.7\"\n                    //             },\n                    //             {\n                    //                 \"time\": \"123110\",\n                    //                 \"value\": \"0.5\"\n                    //             },\n                    //             {\n                    //                 \"time\": \"010123\",\n                    //                 \"value\": \"0.5\"\n                    //             },\n                    //             {\n                    //                 \"time\": \"010122\",\n                    //                 \"value\": \"0.5\"\n                    //             }\n                    //         ],\n                    //         \"pollutionLevel\": [],\n                    //         \"tvoc\": [],\n                    //         \"humity\": [],\n                    //         \"pm25\": [],\n                    //         \"temperature\": []\n                    //     }\n                    // };\n                    var d = data.equimentDetailData;\n                    if (d && Object.prototype.toString.call(d) !== '[object Object]') {\n                        pageManager.showTooltip('数据有误');\n                        return;\n                    }\n                    d = convertData(d);\n                    var chartModel = [\n                        {\n                            selector: '#first-echart-box',\n                            data: d.ch2,\n                            text: '甲醛',\n                            range: [0, 2 + 2]\n                        },\n                        {\n                            selector: '#second-echart-box',\n                            data: d.pollutionLevel,\n                            text: '污染指数',\n                            range: [0, 500 + 20]\n                        },\n                        {\n                            selector: '#three-echart-box',\n                            data: d.tvoc,\n                            text: 'TVOC',\n                            range: [0, 10 + 5]\n                        },\n                        {\n                            selector: '#four-echart-box',\n                            data: d.humity,\n                            text: '湿度',\n                            range: [0, 100 + 10]\n                        },\n                        {\n                            selector: '#five-echart-box',\n                            data: d.pm25,\n                            text: 'PM2.5',\n                            range: [0, 1000 + 30]\n                        },\n                        {\n                            selector: '#six-echart-box',\n                            data: d.temperature,\n                            text: '温度',\n                            range: [-20, 50 + 10]\n                        }\n                    ];\n                    chartModel.forEach(function (v) {\n                        renderChart(v.selector, v, v.range);\n                    });\n\n                    //对原始数据进行转换\n                    function convertData(data) {\n                        var obj = {};\n                        for (var name in data) {\n                            var items = data[name];\n                            var itemLength = items.length;\n                            var timeRegex = /(\\d{2})(\\d{2})(\\d{2})/;\n                            var timeAmount = 48;\n                            var dataArray = new Array(timeAmount);\n                            obj[name] = {x: [], y: []};\n                            //如果当前柱形图有数据\n                            if (itemLength > 0) {\n                                //先对数据排序, 注意12月31日和第二年1月1日跨年的问题\n                                items = items.sort(function (a, b) {\n                                    var reg = timeRegex;\n                                    var v1 = a.time.match(reg);\n                                    var v2 = b.time.match(reg);\n                                    var r1 = parseInt(v1[1]) - parseInt(v2[1]);\n                                    var r2 = parseInt(v1[2]) - parseInt(v2[2]);\n                                    var r3 = parseInt(v1[3]) - parseInt(v2[3]);\n                                    if (r1 === 0) {\n                                        if (r2 === 0) {\n                                            return r3\n                                        } else {\n                                            return r2;\n                                        }\n                                    } else {\n                                        if (Math.abs(r1) > 2) {//当跨年情况出现时月份(1月)小的反而排在后边\n                                            return -r1;\n                                        } else {\n                                            return r1;\n                                        }\n                                    }\n                                });\n                                var n = timeAmount - 1;\n                                var rightSideItem = items.pop();\n                                var itemMatch = rightSideItem.time.match(timeRegex);\n                                var maxTime = parseInt(itemMatch[3]);\n                                var maxDay = parseInt(itemMatch[2]);\n                                var maxMonth = parseInt(itemMatch[1]);\n                                var _time;\n                                var _value;\n                                do {\n                                    _time = (maxMonth < 10 ? ('0' + maxMonth) : maxMonth.toString()) + (maxDay < 10 ? ('0' + maxDay) : maxDay.toString()) + (maxTime < 10 ? ('0' + maxTime) : maxTime.toString());\n                                    _value = 0;\n                                    dataArray[n] = {\n                                        time: _time,\n                                        value: _value\n                                    };\n\n                                    if (rightSideItem && rightSideItem.time === _time) {\n                                        dataArray[n].value = rightSideItem.value;\n                                        rightSideItem = items.pop();\n                                    }\n\n                                    if (--maxTime < 0) {\n                                        maxTime = 23;\n                                        if (maxDay === 1 && maxMonth === 1) {\n                                            maxDay = 31;\n                                            maxMonth = 12;\n                                        } else {\n                                            maxDay -= 1;\n                                        }\n                                    }\n                                } while (n--)\n                                for (var i = 0, len = dataArray.length; i < len; i++) {\n                                    var _t = dataArray[i].time.match(timeRegex)[3] + ':00';\n                                    obj[name].x.push(_t);\n                                    obj[name].y.push(dataArray[i].value);\n                                }\n                            }\n\n                        }\n                        return obj;\n                    }\n                }\n            });\n        }\n\n\n    }\n\n    //获取jsSDK的 ticket\n    function getTicket() {\n        var dfd = new $.Deferred();\n        pageManager.ajaxManager({\n            url: restAPI.equipmentData.getTicket.url,\n            type: 'post',\n            data: {\n                url: location.href.split('#')[0]//encodeURIComponent(location.href.split('#')[0])\n            },\n            dataType: 'json',\n            success: function (res) {\n                if (res.code === 0) {\n                    dfd.resolve(res.data);\n                }\n            },\n            fail: function (ex) {\n                dfd.reject(ex);\n            }\n        });\n\n        return dfd.promise();\n    }\n\n    getTicket().then(function (res) {\n        wx.config({\n            beta: true,\n            debug: false,\n            appId: res.appid,\n            timestamp: res.timestamp,\n            nonceStr: res.nonceStr,\n            signature: res.signature,\n            jsApiList: [\n                'onMenuShareTimeline',\n                'onMenuShareAppMessage',\n                'onMenuShareQQ',\n                'onMenuShareWeibo',\n                'onMenuShareQZone',\n                // 'startRecord',\n                // 'stopRecord',\n                // 'onVoiceRecordEnd',\n                // 'playVoice',\n                // 'pauseVoice',\n                // 'stopVoice',\n                // 'onVoicePlayEnd',\n                // 'uploadVoice',\n                // 'downloadVoice',\n                'chooseImage',\n                'previewImage',\n                'uploadImage',\n                'downloadImage',\n                // 'translateVoice',\n                'getNetworkType',\n                'openLocation',\n                'getLocation',\n                // 'hideOptionMenu',\n                // 'showOptionMenu',\n                // 'hideMenuItems',\n                // 'showMenuItems',\n                // 'hideAllNonBaseMenuItem',\n                // 'showAllNonBaseMenuItem',\n                'closeWindow',\n                // 'scanQRCode',\n                // 'chooseWXPay',\n                // 'openProductSpecificView',\n                // 'addCard',\n                // 'chooseCard',\n                // 'openCard'\n            ]\n        });\n\n\n        wx.ready(function () {\n            wx.invoke('setNavigationBarColor', {\n                color: 'green'\n            });\n\n            wx.onMenuShareTimeline(window.shareOption);\n            wx.onMenuShareQQ(window.shareOption);\n            wx.onMenuShareAppMessage(window.shareOption);\n\n        });\n    }, function () {\n        console.warn('获取js ticket失败');\n    });\n\n","module.exports = \" <div class=\\\"page p6-data black-bgcolor\\\"> <input type=hidden name=title value=空气猫P6plus型 /> <div class=\\\"top-title clearfix\\\"> <a href=javascript:; class=\\\"home fl\\\" id=equipmentName data-bind={text:$root.equipmentName,click:$root.onClickEquipmentName}>未定义</a> <span class=\\\"link-info fr\\\">3分钟前</span> </div> <div class=dial-listbox> <div class=\\\"dial-box dial-box2\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>0.05</span></div> <div class=texting-num>甲醛<span class=mlr5>|</span><span class=small-number>优</span></div> </div> </div> <div class=\\\"dial-box dial-box3\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>mg/m³</div> <div class=texting-big-num><span class=big-number>--</span></div> <div class=texting-num>TVOC<span class=mlr5>|</span><span class=small-number>--</span> </div> </div> </div> <div class=\\\"dial-box dial-box1\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>&mu;g/m³</div> <div class=texting-big-num><span class=big-number>189</span></div> <div class=texting-num>PM2.5<span class=mlr5>|</span><span class=small-number>严重</span> </div> </div> </div> <div class=\\\"dial-box dial-box4\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company></div> <div class=texting-big-num><span class=big-number>430</span></div> <div class=texting-num>污染指数</div> </div> </div> <div class=\\\"dial-box dial-box5 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>℃</div> <div class=texting-big-num><span class=big-number>27</span></div> <div class=texting-num>温度</div> </div> </div> <div class=\\\"dial-box dial-box6 dial-box-blue\\\"> <div class=pie-cricle> <div class=out-cricle></div> <div class=inner-cricle></div> </div> <div class=mark-box> <div class=company>%</div> <div class=texting-big-num><span class=big-number>56</span></div> <div class=texting-num>湿度</div> </div> </div> <div class=clearfix></div> </div> <div class=prompt-message> <div class=ch2-message></div> <div class=tvoc-message></div> <div class=pm25-message></div> </div> <div class=echartsbox> <div id=first-echart-box class=first-echart-box></div> <div id=three-echart-box class=three-echart-box></div> <div id=five-echart-box class=five-echart-box></div> <div id=second-echart-box class=second-echart-box></div> <div id=six-echart-box class=six-echart-box></div> <div id=four-echart-box class=four-echart-box></div> </div> <div class=foot-tabbar> <div class=\\\"weui-tabbar weui-tabbar-link\\\"> <a href=javascript:; class=weui-tabbar__item id=p6DataShutdown data-bind=click:$root.onClickShutdown> <img src=app/images/Shutdown.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>关机</p> </a> <a href=javascript:; class=weui-tabbar__item id=p6DataSheScreenOff data-bind=click:$root.onClickSheScreenOFF> <img src=app/images/Always.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>设备常亮</p> </a> <a href=javascript:; class=weui-tabbar__item id=p6DataSheScreen style=display:none data-bind=click:$root.onClickSheScreen> <img src=app/images/Always.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>设备关闭</p> </a> <a href=javascript:; class=weui-tabbar__item data-bind=click:$root.onClickShare> <img src=app/images/share.png alt=\\\"\\\" class=weui-tabbar__icon> <p class=weui-tabbar__label>分享</p> </a> </div> </div> <div class=none-div></div> <div id=dialogs> <div class=js_dialog id=changeNameWrapper style=display:none> <div class=weui-mask></div> <div class=weui-dialog> <div class=weui-dialog__hd><strong class=weui-dialog__title>请给设备命名</strong></div> <div class=weui-dialog__bd> <input class=\\\"weui-input input-text\\\" type=text placeholder=请输入设备名称> </div> <div class=weui-dialog__ft> <a href=javascript:; class=\\\"weui-dialog__btn weui-dialog__btn_primary\\\" data-bind=click:$root.onClickPrimary>确定</a> <a href=javascript:; class=\\\"weui-dialog__btn weui-dialog__btn_default\\\" data-bind=click:$root.onClickCancel>取消</a> </div> </div> </div> </div> <div id=shareWrapper data-bind=click:$root.onClickShareWrapper> <div class=js_dialog id=share style=display:none> <div class=weui-mask></div> <div class=share-layer> <img class=share-pic src=app/images/sharePic.png> </div> </div> </div> </div> \";"],"sourceRoot":"webpack-module://"}